let scene,camera,renderer,directionalLight,ambientLight,controls;const viewer=document.getElementById("modelviewer"),fwidth=viewer.offsetWidth,fheight=viewer.offsetHeight;let wWidth=2.5,wHeight=6,wDepth=1.5,segment_id=[],columns,customColumns=2,wLoft=3;const thickness=.875,ftTom=.3048;let isLoft=!1,wBottom,wTop,wLeft,wRight,wBack,wpLoftTop,wpLoftLeft,wpLoftRight,wpLoftBottom,wpLoftBack,wBottomLayer,wTopLayer,wLeftLayer,wRightLayer,wLeftLayerTop,wLeftLayerBottom,wRightLayerTop,wRightLayerBottom,segments,offset=0,part=[],setColumns=!1,selectedObject=null,selectedObjects=[],raycaster,pointer,mouse3D,group,exporter,composer,fxaaPass,outlinePass,planeOultinePass,doorOutlinePass,bBox,isCreated=!1;var removed=[],adjacentParts=[],substitubale=0,columns_group=document.getElementById("columns-group");let plane,selectedPlane,hangerRod,top_shelves=[],bot_shelves=[],internalPart,locker,ID_S,ID_L,ED,m_splitter,cp=document.getElementById("copyto"),fp=document.getElementById("flipDoor"),clone_int_small,cloned_int_S_group;var row_num=0,isCreatedBotRow=!0,isExtCreated=!0;let max_width=0;var sp1,sp2,sp3,spLocker;let ext_drawer=[],int_drawer_small=[],int_drawer_large=[],m_locker=[],splitters=[],m_splitters=[];var selectedColumn=0,interactivePlanes=[],selectedPlanes=[],interactivePlane_group,column_id=[],plane_index=0;let _lockers=[],_locker_group,_locker_splitters=[],_locker_splitter_group,_smallIntDrawers=[],_smallIntDrawers_group,_smallIntDrawers_splitters=[],_smallIntDrawers_splitters_group,_largeIntDrawers=[],_largeIntDrawers_group,_largeIntDrawers_splitters=[],_largeIntDrawers_splitters_group,_extDrawers=[],_extDrawers_group,_extDrawers_splitters=[],_extDrawers_splitters_group,_hangers=[],_hanger_group,_top_shelves=[],_top_shelves_parent=[],_bot_shelves=[],_bot_shelf_parent=[],_m_splitters=[],_m_splitters_group,_columns=[],_columns_group,_hDoors_parent=[],_hDoors_parent_group,_sDoors_parent=[],_sDoors_parent_group,_flippableDoor=[];var defaultRotation=new THREE.Quaternion;let _isDoorRight=[],_isDoorLeft=[];var rowCount=0,isSplitterCreated=!1,removed_index,removed_id=[],removed_plane=[],clock,delta=0;let _hDoors=[],_columnsLoft=[],_columnsLoft_group=[],_loftDoors_parent=[],_loftDoors_parent_group,deleteSprites=[],flipVerticalSprite=[],flipVertical_group=new THREE.Group,deleteSprites_group=new THREE.Group,onNormalDeleteSprite=(new THREE.TextureLoader).load("./assets/icons8-minus-100.png"),onHoverDeleteSprite=(new THREE.TextureLoader).load("./assets/icons8-black-minus-100.png"),onNormalFlipSprite=(new THREE.TextureLoader).load("./assets/flipLeft.png"),onHoverFlipSprite=(new THREE.TextureLoader).load("./assets/flipOnHover.png");var isDoorOpened=!1,isLoftOpened=!1,texLoader=new THREE.TextureLoader;let wood_albedo,wood_normal,wood_roughness,selectedSprite,selectedMirror,_splitterMaterial,_railMaterial,_wardrobeMaterial,_lockerMaterial,_shelfMaterial,_hangerMaterial,_doorMaterial,_columnsMaterial,_extDrawerMaterial,_intSmallMaterial,_intLargeMaterial,_flipMirrorMaterials,_mirrorMaterials;var renderOptionsValue=0,pmremGenerator;let isHingedDoor=!0,ssaoPass,_doorRails_parent=[],_doorRails_parent_group=[],_doorRailParent;var thicknessInmeter=.022225;let isSlideRight=!1,isSlideLeft=!1,selectedDoor,isMirrorAdded=!1,wall,wallRight,wallLeft,floor,shadowPlane;function init(){scene=new THREE.Scene,window.scene=scene,THREE.Cache.enabled=!0,camera=new THREE.PerspectiveCamera(25,fwidth/fheight,.01,100),camera.position.set(0,0,15),camera.aspect=fwidth/fheight,camera.layers.enable(0),camera.layers.enable(1),camera.layers.enable(2),raycaster=new THREE.Raycaster,pointer=new THREE.Vector2,group=new THREE.Group,_columnsLoft_group=new THREE.Group,_locker_group=new THREE.Group,_locker_splitter_group=new THREE.Group,_largeIntDrawers_group=new THREE.Group,_smallIntDrawers_group=new THREE.Group,_extDrawers_group=new THREE.Group,_smallIntDrawers_splitters_group=new THREE.Group,_largeIntDrawers_splitters_group=new THREE.Group,_extDrawers_splitters_group=new THREE.Group,_hanger_group=new THREE.Group,_m_splitters_group=new THREE.Group,_hDoors_parent_group=new THREE.Group,_columns_group=new THREE.Group,interactivePlane_group=new THREE.Group,_loftDoors_parent_group=new THREE.Group,_doorRailParent=new THREE.Group,exporter=new THREE.GLTFExporter,_sDoors_parent_group=new THREE.Group,create_lights(),createFloor(),createWall(),helpers(),createWardrobe(),clock=new THREE.Clock,renderer=new THREE.WebGLRenderer({antialias:!0,alpha:!0,preserveDrawingBuffer:!0}),renderer.setPixelRatio(window.devicePixelRatio),renderer.setSize(fwidth,fheight),renderer.info.autoReset=!1,renderer.outputEncoding=THREE.sRGBEncoding,renderer.toneMapping=THREE.LinearToneMapping,renderer.toneMappingExposure=.7,renderer.shadowMap.enabled=!0,renderer.shadowMap.type=THREE.PCFSoftShadowMap,renderer.compile(scene,camera),(pmremGenerator=new THREE.PMREMGenerator(renderer)).compileEquirectangularShader(),viewer.appendChild(renderer.domElement),post_process(),controls=new THREE.OrbitControls(camera,renderer.domElement),controls.enableDamping=!0,controls.minDistance=8,controls.maxDistance=9,controls.panSpeed=0,controls.enableDamping=!0,controls.dampingFactor=1,controls.target.set(0,1.45,0),controls.minPolarAngle=0,controls.maxPolarAngle=Math.PI/2,controls.minAzimuthAngle=-Math.PI/2,controls.maxAzimuthAngle=Math.PI/2,window.addEventListener("resize",onWindowResize,!0),document.addEventListener("pointermove",onPointerMove),document.addEventListener("click",onClick),controls.saveState()}function onWindowResize(){const canvas=renderer.domElement,width=canvas.clientWidth,height=canvas.clientHeight;canvas.width===width&&canvas.height===height||(camera.aspect=fwidth/fheight,camera.updateProjectionMatrix(),renderer.setSize(fwidth,fheight),composer.setSize(fwidth,fheight));const pixelRatio=renderer.getPixelRatio()}function animate(){requestAnimationFrame(animate),controls.update(),render()}function render(){$("input:radio[name='columnsOptions']").change((function(){$(this).is(":checked")&&(isCreated=!0)})),featuresControl(),updateWardrobe(),addLoft(isLoft),updateWall(),updateColumnsDoor(),topShelfOnSelected(plane_index),botShelfFilter(),updateBotShelves(plane_index);for(var i=0;i<customColumns;i++)updateHingedDoorUpSize(i),updateLoftDoorUpSize(i);updateDoorRailUp();for(var i=0;i<customColumns/2;i++)updateSlideDoorsUp(i);for(var i=0;i<_columnsLoft.length;i++)updateLoftColumns(i);columnsCombination(),setflipDoor(),updateHingedDoorOnColumnCombined(),delta=clock.getDelta(),doorAction(),slideDoorAction(),loftDoorAction(),paintWardrobe(),interactivePlanes.length>0?document.getElementById("column_id").innerHTML=plane_index+1:document.getElementById("column_id").innerHTML="None",document.getElementById("capturedImage").src=renderer.domElement.toDataURL(),renderOption(),composer.render()}function getInputs(){chooseColumns_number(),$("#actionDoor").hide(),$("#actionSlideDoorLeft").hide(),$("#actionSlideDoorRight").hide(),$("#slideDoor").prop("disabled",!0),$("#chooseColumns").hide(),$("#width").on("input",(function(){wWidth=$("#width").val(),wWidth>3?($("#hingedDoor").prop("checked",!1),$("#chooseColumns").hide(),$("#slideDoor").prop("checked",!1),$("#slideDoor").prop("disabled",!1)):($("#slideDoor").prop("checked",!1),$("#slideDoor").prop("disabled",!0)),chooseColumns_number(),reset()})),$("input:radio[name='heightOptions']").click((function(){reset(),wHeight=$(this).val()})),$("input:radio[name='depthOptions']").click((function(){reset(),wDepth=$(this).val()})),$("input:radio[name='doorOptions']").change((function(){$(this).is(":checked")&&(0==$(this).val()?($("#chooseColumns").show(),isHingedDoor=!0,isCreated=!0,chooseColumns_number(),createColumns_Doors(isHingedDoor),$("#actionDoor").show(),$("#actionSlideDoorLeft").hide(),$("#actionSlideDoorRight").hide()):($("#chooseColumns").hide(),isHingedDoor=!1,isCreated=!0,chooseColumns_number(),createColumns_Doors(isHingedDoor),$("#actionDoor").hide(),$("#actionSlideDoorLeft").show(),$("#actionSlideDoorRight").show()))})),$("#loftOptionsPanel").hide(),$("#addloft").change((function(){$(this).is(":checked")?($("#loftOptionsPanel").show(),$("#loftLabel").html("Remove Loft"),isLoft=!0):(isLoft=!1,$("#loftLabel").html("Add Loft"),$("#loftOptionsPanel").hide())})),$('input:radio[name="loftOptions"]').change((function(){wLoft=$(this).val()})),$("#actionSlideDoorLeft").append('<i class="m-lg-1  fa fa-door-open"></i>Open Left '),$("#actionSlideDoorRight").append('<i class="m-lg-1  fa fa-door-open"></i>Open Right '),$("#actionSlideDoorLeft").click((function(){isSlideLeft?($(this).empty(),$(this).append('<i class="m-lg-1  fa fa-door-open"></i>Open Left '),isSlideLeft=!1):($(this).empty(),$(this).append('<i class="m-lg-1  fa fa-door-closed"></i>Close Left '),isSlideLeft=!0,isSlideRight=!1,$("#actionSlideDoorRight").empty(),$("#actionSlideDoorRight").append('<i class="m-lg-1  fa fa-door-open"></i>Open Right '))})),$("#actionSlideDoorRight").click((function(){isSlideRight?($(this).empty(),$(this).append('<i class="m-lg-1  fa fa-door-open"></i>Open Right '),isSlideRight=!1):($(this).empty(),$(this).append('<i class="m-lg-1  fa fa-door-closed"></i>Close Right '),isSlideRight=!0,isSlideLeft=!1,$("#actionSlideDoorLeft").empty(),$("#actionSlideDoorLeft").append('<i class="m-lg-1  fa fa-door-open"></i>Open Left '))})),$("#actionDoor").append('<i class="m-lg-1  fa fa-door-open"></i>Open Door '),$("#actionDoor").click((function(){isDoorOpened?($(this).empty(),$(this).append('<i class="m-lg-1  fa fa-door-open"></i>Open Door '),isDoorOpened=!1):($(this).empty(),$(this).append('<i class="m-lg-1  fa fa-door-closed"></i>Close Door '),isDoorOpened=!0)})),$("#doneDimensions").click((function(){$("editInteriors").show(),interactivePlane_group.visible=!0,deleteSprites_group.visible=!1,flipVertical_group.visible=!1})),$("#export").click((function(){Export()})),$("#flipDoor").change((function(){_flipDoor($(this).children("option:selected").val())})),$("#addMirror").click((function(){isMirrorAdded?($(this).html("Add Mirror On Door"),isMirrorAdded=!1):($(this).html("Done"),isMirrorAdded=!0)}))}function featuresControl(){_columns.length>0?$("#editInterior").show():$("#editInterior").hide()}function create_lights(){directionalLight=new THREE.DirectionalLight(16774107,.5),directionalLight.position.set(.5,1.5,10),directionalLight.castShadow=!0,directionalLight.shadow.mapSize.width=512,directionalLight.shadow.mapSize.height=512,scene.add(directionalLight);var directionalLight1=new THREE.DirectionalLight(12575999,.3);directionalLight1.position.set(0,5,0),directionalLight1.castShadow=!0,directionalLight1.shadow.mapSize.width=512,directionalLight1.shadow.mapSize.height=512,scene.add(directionalLight1);var ambientLight=new THREE.AmbientLight(16777215,.8);scene.add(ambientLight);var directionalLight2=new THREE.DirectionalLight(14606046,.3);directionalLight2.position.set(0,3,-3),directionalLight2.castShadow=!1,directionalLight2.shadow.mapSize.width=512,directionalLight2.shadow.mapSize.height=512,scene.add(directionalLight2);var hemiLight=new THREE.HemisphereLight(16773859,13757439,.3);scene.add(hemiLight)}function createFloor(){var g=new THREE.PlaneGeometry(100,100),m=new THREE.MeshStandardMaterial({color:12961219});floor=new THREE.Mesh(g,m),floor.name="floor",floor.position.set(0,0,0),floor.receiveShadow=!0,floor.rotateX(-90*THREE.Math.DEG2RAD),scene.add(floor)}function createWall(){var g=new THREE.PlaneGeometry(100,100),m=new THREE.MeshStandardMaterial({color:12961219});wall=new THREE.Mesh(g,m),wall.name="wall",wall.position.set(0,0,0),wall.receiveShadow=!0,wall.rotateX(0*THREE.Math.DEG2RAD),scene.add(wall),wallLeft=new THREE.Mesh(g,m),wallLeft.name="wallleft",wallLeft.receiveShadow=!0,wallLeft.rotateY(-90*THREE.Math.DEG2RAD),scene.add(wallLeft),wallRight=new THREE.Mesh(g,m),wallRight.name="wallleft",wallRight.receiveShadow=!0,wallRight.rotateY(90*THREE.Math.DEG2RAD),scene.add(wallRight),wallLeft.position.set(0,0,0),wallRight.position.set(0,0,0)}function updateWall(){wBack&&wall&&(floor.position.setY(wLeft.position.y-wLeft.scale.y/2),wallLeft.position.setX(8),wallRight.position.setX(-8),wall.position.setZ(wBack.position.z-.022225))}function createColumns(index){var g=new THREE.BoxGeometry(1,1,1),mesh=new THREE.Mesh(g,_columnsMaterial);return mesh.name="w_columns_"+index,_columns[index]=mesh,_columns_group.name="w_columns",_columns_group.add(_columns[index]),scene.add(_columns_group),_columns[index]}function removeColumns(index){index?(_columns.forEach(e=>{_columns[index]instanceof THREE.Mesh&&_columns[index]==e&&_columns_group instanceof THREE.Group&&_columns_group.remove(e)}),_columns[index]=null):_columns&&(_columns.forEach(e=>{e instanceof THREE.Mesh&&_columns_group instanceof THREE.Group&&(_columns_group.remove(e),scene.remove(_columns_group))}),_columns=[],removed=[],removed_id=[],adjacentParts=[])}function updateColumns(){offset=Math.abs(wLeft.position.x-wLeft.scale.x/2-(wRight.position.x-wRight.scale.x/2))/customColumns;for(var i=0;i<customColumns-1;i++)if(_columns[i]){if(_columns[i]instanceof THREE.Mesh)if(isHingedDoor)_columns[i].scale.set(.022225,wTop.position.y-wTop.scale.y-wBottom.position.y,.022225+.3048*wDepth),_columns[i].position.set(i*offset,_columns[i].scale.y/2+wBottom.position.y+wBottom.scale.y/2,.0111125);else{var subtract=.3048*1.35/12;_columns[i].scale.set(.022225,wTop.position.y-wTop.scale.y-wBottom.position.y,.022225+.3048*wDepth-subtract),_columns[i].position.set(i*offset,_columns[i].scale.y/2+wBottom.position.y+wBottom.scale.y/2,.0111125-subtract/2)}}else if(createColumns(i),isHingedDoor)_columns[i].scale.set(.022225,wTop.position.y-wTop.scale.y-wBottom.position.y,.022225+.3048*wDepth),_columns[i].position.set(i*offset,_columns[i].scale.y/2+wBottom.position.y+wBottom.scale.y/2,.0111125);else{var subtract=.3048*1.35/12;_columns[i].scale.set(.022225,wTop.position.y-wTop.scale.y-wBottom.position.y,.022225+.3048*wDepth-subtract),_columns[i].position.set(i*offset,_columns[i].scale.y/2+wBottom.position.y+wBottom.scale.y/2,.0111125-subtract/2)}_columns_group.position.set(offset+wLeft.position.x,_columns_group.position.y,_columns_group.position.z);for(var i=0;i<customColumns-1;i++)deleteSprites[i]?deleteSprites[i]instanceof THREE.Sprite&&updateColumnSprite(i):(createColumnSprite(i),updateColumnSprite(i));if(isHingedDoor)for(var i=0;i<customColumns;i++)_hDoors_parent[i]?(updateHingedDoor(i),updateFlipDoorSprite(i)):(createHingedDoor(i),updateHingedDoor(i),createFlipDoorSprite(i),updateFlipDoorSprite(i));else createSlideDoors();for(var i=0;i<customColumns;i++)_m_splitters[i]?updateHorizontalSplitter(i):(createHorizontalSplitter(i),updateHorizontalSplitter(i));_m_splitters_group.position.set(offset/2+wLeft.position.x,_m_splitters_group.position.y,_m_splitters_group.position.z),generateInteractivePlanes(customColumns)}function createLoftColumns(index){var g=new THREE.BoxGeometry(1,1,1),mesh=new THREE.Mesh(g,_columnsMaterial);return mesh.name="w_loft_column_"+index,_columnsLoft[index]=mesh,_columnsLoft_group.name="w_loft_columns",_columnsLoft_group.add(_columnsLoft[index]),scene.add(_columnsLoft_group),_columnsLoft[index]}function updateLoftColumns(index){offset=Math.abs(wLeft.position.x-wLeft.scale.x/2-(wRight.position.x-wRight.scale.x/2))/customColumns,null!=_columnsLoft[index]&&(_columnsLoft[index].scale.set(.022225,.3048*wLoft-wpLoftBottom.scale.y-wpLoftTop.scale.y,.0762),_columnsLoft[index].position.set(index*offset,wpLoftBack.scale.y/2+wpLoftBottom.position.y-wpLoftBottom.scale.y/2,-wpLoftBack.position.z-wpLoftBack.scale.z/2-.022225),index%2==0&&(_columnsLoft[index].visible=!1)),_columnsLoft_group.position.set(offset+wpLoftLeft.position.x,_columnsLoft_group.position.y,_columnsLoft_group.position.z)}function createLoftDoors(index){var g=new THREE.BoxGeometry(1,1,1),door=new THREE.Mesh(g,_doorMaterial);door.name="loft_door_"+index;var _lDoors_group=new THREE.Group;_lDoors_group.add(door),_lDoors_group.name="loft_door_pivot_"+index,_loftDoors_parent[index]=_lDoors_group,_loftDoors_parent_group.name="loft_doors",_loftDoors_parent_group.add(_loftDoors_parent[index]),scene.add(_loftDoors_parent_group)}function updateLoftDoorUpSize(index){if(_loftDoors_parent[index]){var posY=wpLoftBack.scale.y/2+wpLoftBottom.position.y-wpLoftBottom.scale.y/2,scaleY=.3048*wLoft-wpLoftBottom.scale.y-wpLoftTop.scale.y;if(_loftDoors_parent[index]instanceof THREE.Group)if(_loftDoors_parent_group.position.set(offset+wpLoftLeft.position.x,_loftDoors_parent_group.position.y,_loftDoors_parent_group.position.z),index%2==0)for(var j=0;j<_loftDoors_parent[index].children.length;j++)_loftDoors_parent[index].children[j]instanceof THREE.Mesh&&(_loftDoors_parent[index].children[j].scale.setY(scaleY),_loftDoors_parent[index].children[j].position.setY(posY));else for(var j=0;j<_loftDoors_parent[index].children.length;j++)_loftDoors_parent[index].children[j]instanceof THREE.Mesh&&(_loftDoors_parent[index].children[j].scale.setY(scaleY,.022225),_loftDoors_parent[index].children[j].position.setY(posY))}}function updateLoftDoors(index){if(_loftDoors_parent[index]){offset=Math.abs(wLeft.position.x-wLeft.scale.x/2-(wRight.position.x-wRight.scale.x/2))/customColumns;var posY=wpLoftBack.scale.y/2+wpLoftBottom.position.y-wpLoftBottom.scale.y/2,scaleY=.3048*wLoft-wpLoftBottom.scale.y-wpLoftTop.scale.y;if(_loftDoors_parent[index]instanceof THREE.Group)if(_loftDoors_parent_group.position.set(offset+wpLoftLeft.position.x,_loftDoors_parent_group.position.y,_loftDoors_parent_group.position.z),index%2==0){if(index!=customColumns-1)if(0==index){for(var j=0;j<_loftDoors_parent[index].children.length;j++)_loftDoors_parent[index].children[j]instanceof THREE.Mesh&&(_loftDoors_parent[index].children[j].scale.set(offset-.0111125,scaleY,.022225),_loftDoors_parent[index].children[j].position.set(_loftDoors_parent[index].children[j].scale.x/2,posY,-.0111125));_loftDoors_parent[index].position.set(_columnsLoft[index].position.x-offset+.0111125,_loftDoors_parent[index].position.y,_loftDoors_parent[index].position.z+wpLoftLeft.scale.z/2)}else{for(var j=0;j<_loftDoors_parent[index].children.length;j++)_loftDoors_parent[index].children[j]instanceof THREE.Mesh&&(_loftDoors_parent[index].children[j].scale.set(offset,scaleY,.022225),_loftDoors_parent[index].children[j].position.set(_loftDoors_parent[index].children[j].scale.x/2,posY,-.0111125));_loftDoors_parent[index].position.set(_columnsLoft[index].position.x-offset,_loftDoors_parent[index].position.y,_loftDoors_parent[index].position.z+wpLoftLeft.scale.z/2)}else{for(var j=0;j<_loftDoors_parent[index].children.length;j++)_loftDoors_parent[index].children[j]instanceof THREE.Mesh&&(_loftDoors_parent[index].children[j].scale.set(offset-.0111125,scaleY,.022225),_loftDoors_parent[index].children[j].position.set(_loftDoors_parent[index].children[j].scale.x/2,posY,-.0111125));_loftDoors_parent[index].position.set(_columnsLoft[index-1].position.x,_loftDoors_parent[index].position.y,_loftDoors_parent[index].position.z+wpLoftLeft.scale.z/2)}_loftDoors_parent[index].rotation.set(0,0*THREE.Math.DEG2RAD,0)}else{if(index!=customColumns-1){for(var j=0;j<_loftDoors_parent[index].children.length;j++)_loftDoors_parent[index].children[j]instanceof THREE.Mesh&&(_loftDoors_parent[index].children[j].scale.set(offset,scaleY,.022225),_loftDoors_parent[index].children[j].position.set(_loftDoors_parent[index].children[j].scale.x/2,posY,.0111125),_loftDoors_parent[index].children[j].material.color.set("#34deeb"));_loftDoors_parent[index].position.set(_columnsLoft[index-1].position.x+offset,_loftDoors_parent[index].position.y,_loftDoors_parent[index].position.z+wpLoftLeft.scale.z/2)}else{for(var j=0;j<_loftDoors_parent[index].children.length;j++)_loftDoors_parent[index].children[j]instanceof THREE.Mesh&&(_loftDoors_parent[index].children[j].scale.set(offset-.0111125,scaleY,.022225),_loftDoors_parent[index].children[j].position.set(_loftDoors_parent[index].children[j].scale.x/2,posY,.0111125),_loftDoors_parent[index].children[j].material.color.set("#34deeb"));_loftDoors_parent[index].position.set(_columnsLoft[index-1].position.x+offset-.0111125,_loftDoors_parent[index].position.y,_loftDoors_parent[index].position.z+wpLoftLeft.scale.z/2)}_loftDoors_parent[index].rotation.set(0,-180*THREE.Math.DEG2RAD,0)}}}function removeLoftColumns(index){index?(_columnsLoft.forEach(e=>{_columnsLoft[index]instanceof THREE.Mesh&&_columnsLoft[index]==e&&_columnsLoft_group instanceof THREE.Group&&_columnsLoft_group.remove(e)}),_columnsLoft[index]=null):_columnsLoft&&(_columnsLoft.forEach(e=>{e instanceof THREE.Mesh&&_columnsLoft_group instanceof THREE.Group&&(_columnsLoft_group.remove(e),scene.remove(_columnsLoft_group))}),_columnsLoft=[])}function removeLoftDoors(index){index?(_loftDoors_parent[index]instanceof THREE.Group&&_loftDoors_parent_group.remove(_loftDoors_parent[index]),_loftDoors_parent[index]=null):(_loftDoors_parent.forEach(e=>{e instanceof THREE.Group&&_loftDoors_parent_group.remove(e)}),_loftDoors_parent=[])}function generateLoftColumns(){if(0==_columnsLoft.length){for(var i=0;i<customColumns-1;i++)createLoftColumns(i),updateLoftColumns(i);for(var i=0;i<customColumns;i++)createLoftDoors(i),updateLoftDoors(i)}else updateLoftColumns(i),updateLoftDoors(i)}function updateHorizontalSplitter(index){var subtract=.3048*1.35/12;_m_splitters[index]?_m_splitters[index]instanceof THREE.Mesh&&(isHingedDoor?(_m_splitters[index].scale.set(offset-.022225,.022225,.3048*wDepth),_m_splitters[index].position.set(index*offset,wTop.position.y-3*.3048+wTop.scale.y/2+.022225,wLeft.position.z/2)):(_m_splitters[index].scale.set(offset-.022225,.022225,_columns[0].scale.z),_m_splitters[index].position.set(index*offset,wTop.position.y-3*.3048+wTop.scale.y/2+.022225,_columns[0].position.z))):isHingedDoor?(_m_splitters[index].scale.set(offset-.022225,.022225,.3048*wDepth),_m_splitters[index].position.set(index*offset,wTop.position.y-3*.3048+wTop.scale.y/2+.022225,wLeft.position.z/2)):(_m_splitters[index].scale.set(offset-.022225,.022225,_columns[0].scale.z),_m_splitters[index].position.set(index*offset,wTop.position.y-3*.3048+wTop.scale.y/2+.022225,_columns[0].position.z-subtract/2))}function generateInteractivePlanes(index){for(var i=0;i<index;i++)interactivePlanes[i]?interactivePlanes[i]instanceof THREE.Mesh&&updateInteractivePlane(i):(createInteractivePlane(i),updateInteractivePlane(i))}function addHorizontalParts(){$("#addED").click((function(){if(!_extDrawers[plane_index]){for(var i=0;i<customColumns;i++)createExternalDrawer(i),updateExternalDrawer(i),updateInternalDrawerLarge(i);_bot_shelf_parent[plane_index]&&(0==onHeightChanged(index)?removeBotShelves(index):(removeBotShelves(plane_index),createBotShelves(onHeightChanged(plane_index),plane_index),updateBotShelves(plane_index)))}})),$("#addIDL").click((function(){_largeIntDrawers[plane_index]||(createInternalDrawerLarge(plane_index),updateInternalDrawerLarge(plane_index),_bot_shelf_parent[plane_index]&&(0==onHeightChanged(index)?removeBotShelves(index):(removeBotShelves(plane_index),createBotShelves(onHeightChanged(plane_index),plane_index),updateBotShelves(plane_index))))})),$("#addIDS").click((function(){_smallIntDrawers[plane_index]||(createInternalDrawerSmall(plane_index),updateInternalDrawerSmall(plane_index),updateLocker(plane_index),_bot_shelf_parent[plane_index]&&(0==onHeightChanged(index)?removeBotShelves(index):(removeBotShelves(plane_index),createBotShelves(onHeightChanged(plane_index),plane_index),updateBotShelves(plane_index))))})),$("#addLocker").click((function(){_lockers[plane_index]||(createLocker(plane_index),updateLocker(plane_index),updateInternalDrawerSmall(plane_index),_bot_shelf_parent[plane_index]&&(0==onHeightChanged(index)?removeBotShelves(index):(removeBotShelves(plane_index),createBotShelves(onHeightChanged(plane_index),plane_index),updateBotShelves(plane_index))))})),$("#addBottomShelf").click((function(){onHeightChanged(plane_index)>0?_bot_shelf_parent[plane_index]?(removeBotShelves(plane_index),createBotShelves(onHeightChanged(plane_index),plane_index),updateBotShelves(plane_index)):(createBotShelves(onHeightChanged(plane_index),plane_index),updateBotShelves(plane_index)):removeBotShelves(plane_index)})),$("#hangerOrShelf").change((function(){1==$(this).val()?_hangers[plane_index]?_hangers[plane_index]instanceof THREE.Mesh&&updateHanger(plane_index):(createHanger(plane_index),updateHanger(plane_index)):2==$(this).val()&&(_top_shelves_parent[plane_index]?_top_shelves_parent[plane_index]instanceof THREE.Group&&updateTopShelves(plane_index):(createTopShelves(2,plane_index),updateTopShelves(plane_index)))})),$("#actionloftDoor").append('<i class="fa fa-door-open"></i>Open Door '),$("#actionloftDoor").click((function(){isLoftOpened?($(this).empty(),$(this).append('<i class="fa fa-door-open"></i>Open Door '),isLoftOpened=!1):($(this).empty(),$(this).append('<i class="fa fa-door-closed"></i>Close Door '),isLoftOpened=!0)})),$("#copyto").change((function(){pasetToColumn($(this).children("option:selected").val())})),$("#removeAll").click((function(){removeAllInterior()}))}function topShelfOnSelected(index){var topOpt=$("#hangerOrShelf");_hangers[index]?topOpt.prop("selectedIndex",1):_top_shelves_parent[index]?topOpt.prop("selectedIndex",2):topOpt.prop("selectedIndex",0)}function botShelfFilter(){onHeightChanged(plane_index)>0?$("#addBottomShelf").removeClass("disabled"):$("#addBottomShelf").addClass("disabled"),wHeight<6.5?(_smallIntDrawers[plane_index]?$("#addLocker").addClass("disabled"):$("#addLocker").removeClass("disabled"),_lockers[plane_index]?$("#addIDS").addClass("disabled"):$("#addIDS").removeClass("disabled"),_largeIntDrawers.length>0?$("#addED").addClass("disabled"):$("#addED").removeClass("disabled"),_extDrawers.length>0?$("#addIDL").addClass("disabled"):$("#addIDL").removeClass("disabled"),_smallIntDrawers[plane_index]&&_bot_shelf_parent[plane_index]?($("#addIDL").addClass("disabled"),$("#addIDS").addClass("disabled"),$("#addED").addClass("disabled"),$("#addLocker").addClass("disabled")):_lockers[plane_index]&&_bot_shelf_parent[plane_index]?($("#addIDS").addClass("disabled"),$("#addED").addClass("disabled"),$("#addLocker").addClass("disabled"),$("#addIDL").addClass("disabled")):_smallIntDrawers[plane_index]&&!_bot_shelf_parent[plane_index]&&_largeIntDrawers[plane_index]&&$("#addIDS").addClass("disabled")):6.5==wHeight?_extDrawers.length>0?_largeIntDrawers[plane_index]&&($("#addIDS").addClass("disabled"),$("#addLocker").addClass("disabled")):_lockers[plane_index]&&!_smallIntDrawers[plane_index]&&($("#addIDS").removeClass("disabled"),$("#addLocker").removeClass("disabled"),$("#addIDL").removeClass("disabled"),$("#addED").addClass("disabled")):wHeight>6.5&&($("#addBottomShelf").removeClass("disabled"),_lockers[plane_index]&&!_smallIntDrawers[plane_index]?_largeIntDrawers[plane_index]&&_extDrawers[plane_index]?$("#addIDS").addClass("disabled"):($("#addIDL").removeClass("disabled"),$("#addLocker").removeClass("disabled"),$("#addED").removeClass("disabled")):!_lockers[plane_index]&&_smallIntDrawers[plane_index]?($("#addIDS").removeClass("disabled"),$("#addLocker").addClass("disabled"),$("#addIDL").removeClass("disabled"),$("#addED").removeClass("disabled")):_lockers[plane_index]&&_smallIntDrawers[plane_index]?($("#addIDL").addClass("disabled"),$("#addED").addClass("disabled"),$("#addIDS").removeClass("disabled"),$("#addLocker").removeClass("disabled")):($("#addIDL").removeClass("disabled"),$("#addED").removeClass("disabled"),$("#addIDS").removeClass("disabled"),$("#addLocker").removeClass("disabled")))}function addLoft(visible){wpLoftTop.visible=visible,wpLoftBottom.visible=visible,wpLoftLeft.visible=visible,wpLoftRight.visible=visible,wpLoftBack.visible=visible,visible&&!isCreated?generateLoftColumns():(removeLoftDoors(),removeLoftColumns())}function createWardrobe(){initMaterial();var g=new THREE.BoxGeometry(1,1,1);wBottom=new THREE.Mesh(g,_wardrobeMaterial),wBottom.name="wardrobe_bottom",wBottom.position.set(0,0,0),wBottom.layers.set(0),wBottomLayer=new THREE.Mesh(g,_wardrobeMaterial),wBottomLayer.name="wardrobe_bottom_layer",wBottomLayer.position.set(0,0,0),wBottomLayer.layers.set(0),wBack=new THREE.Mesh(g,_wardrobeMaterial),wBack.name="wardrobe_back",wBack.position.set(0,0,0),wBottom.layers.set(0),wLeft=new THREE.Mesh(g,_wardrobeMaterial),wLeft.name="wardrobe_left",wLeft.position.set(0,0,0),wLeft.layers.set(0),wLeftLayer=new THREE.Mesh(g,_wardrobeMaterial),wLeftLayer.name="wardrobe_left_layer",wLeftLayer.position.set(0,0,0),wLeftLayer.layers.set(0),wLeftLayerTop=new THREE.Mesh(g,_wardrobeMaterial),wLeftLayerTop.name="wardrobe_left_layerTop",wLeftLayerTop.position.set(0,0,0),wLeftLayerTop.layers.set(0),wLeftLayerBottom=new THREE.Mesh(g,_wardrobeMaterial),wLeftLayerBottom.name="wardrobe_left_layerBottom",wLeftLayerBottom.position.set(0,0,0),wLeftLayerBottom.layers.set(0),wRight=new THREE.Mesh(g,_wardrobeMaterial),wRight.name="wardrobe_right",wRight.position.set(0,0,0),wRight.layers.set(0),wRightLayer=new THREE.Mesh(g,_wardrobeMaterial),wRightLayer.name="wardrobe_right_layer",wRightLayer.position.set(0,0,0),wRightLayer.layers.set(0),wRightLayerBottom=new THREE.Mesh(g,_wardrobeMaterial),wRightLayerBottom.name="wardrobe_right_layerBottom",wRightLayerBottom.position.set(0,0,0),wRightLayerBottom.layers.set(0),wRightLayerTop=new THREE.Mesh(g,_wardrobeMaterial),wRightLayerTop.name="wardrobe_right_layerTop",wRightLayerTop.position.set(0,0,0),wRightLayerTop.layers.set(0),wTop=new THREE.Mesh(g,_wardrobeMaterial),wTop.name="wardrobe_top",wTop.position.set(0,0,0),wTop.layers.set(0),wTopLayer=new THREE.Mesh(g,_wardrobeMaterial),wTopLayer.name="wardrobe_top_layer",wTopLayer.position.set(0,0,0),wTopLayer.layers.set(0),wpLoftTop=new THREE.Mesh(g,_wardrobeMaterial),wpLoftTop.name="wardrobe_loft_top",wpLoftTop.position.set(0,0,0),wpLoftTop.visible=!1,wpLoftTop.layers.set(1),wpLoftLeft=new THREE.Mesh(g,_wardrobeMaterial),wpLoftLeft.name="wardrobe_loft_left",wpLoftLeft.position.set(0,0,0),wpLoftLeft.visible=!1,wpLoftLeft.layers.set(1),wpLoftRight=new THREE.Mesh(g,_wardrobeMaterial),wpLoftRight.name="wardrobe_loft_right",wpLoftRight.position.set(0,0,0),wpLoftRight.visible=!1,wpLoftRight.layers.set(1),wpLoftBottom=new THREE.Mesh(g,_wardrobeMaterial),wpLoftBottom.name="wardrobe_loft_bottom",wpLoftBottom.position.set(0,0,0),wpLoftBottom.visible=!1,wpLoftBottom.layers.set(1),wpLoftBack=new THREE.Mesh(g,_wardrobeMaterial),wpLoftBack.name="wardrobe_loft_back",wpLoftBack.position.set(0,0,0),wpLoftBack.visible=!1,wpLoftBack.layers.set(1),scene.add(wBottom),scene.add(wBack),scene.add(wLeft),scene.add(wRight),scene.add(wTop),scene.add(wBottomLayer),scene.add(wTopLayer),scene.add(wLeftLayer),scene.add(wRightLayer),scene.add(wLeftLayerTop),scene.add(wLeftLayerBottom),scene.add(wRightLayerTop),scene.add(wRightLayerBottom),scene.add(wpLoftBottom),scene.add(wpLoftBack),scene.add(wpLoftLeft),scene.add(wpLoftRight),scene.add(wpLoftTop)}function updateWardrobe(){wBottom&&(isHingedDoor?(wBottom.scale.set(.3048*wWidth,.022225,.3048*wDepth+.022225),wBottom.position.set(0,.0746125,.0111125),wBottomLayer.visible=!1):(wBottomLayer.visible=!0,wBottom.scale.set(.3048*wWidth,.022225,.3048*wDepth+.022225-.03429),wBottom.position.set(0,.0746125,-.0060325))),wBottomLayer&&(_extDrawers.length>0?(wBottomLayer.scale.set(.3048*wWidth,.022225,.3048*wDepth+.022225),wBottomLayer.position.set(0,.0746125,.0111125)):(wBottomLayer.scale.set(.3048*wWidth,.0111125,.3048*wDepth+.022225),wBottomLayer.position.set(0,.06905625,.0111125))),wBack&&(wBack.scale.set(.3048*wWidth,.3048*wHeight-.0635,.022225),isHingedDoor?wBack.position.set(0,wBack.scale.y/2+wBottom.position.y-wBottom.scale.y/2,-wBottom.scale.z/2):wBack.position.set(0,wBack.scale.y/2+wBottom.position.y-wBottom.scale.y/2,-wBottom.scale.z/2-.017145)),wTopLayer&&(wTopLayer.scale.set(.3048*wWidth,.0111125,.3048*wDepth+.04445),wTopLayer.position.set(0,wBottom.position.y+wBack.scale.y+.00555625-wBottom.scale.y,0)),wTop&&(isHingedDoor?(wTopLayer.visible=!1,wTop.scale.set(.3048*wWidth,.022225,.3048*wDepth+.04445),wTop.position.set(0,wBottom.position.y+wBack.scale.y-wBottom.scale.y,0)):(wTopLayer.visible=!0,wTop.scale.set(.3048*wWidth,.022225,.3048*wDepth+.04445-.03429),wTop.position.set(0,wBottom.position.y+wBack.scale.y-wBottom.scale.y,-.017145))),wLeftLayer&&(wLeftLayer.scale.set(.0111125,.3048*wHeight,.04445+.3048*wDepth),wLeftLayer.position.set(-(.022225-wLeftLayer.scale.x/2+wBack.scale.x/2),wLeftLayer.scale.y/2+wBottom.position.y-.0635-wBottom.scale.y/2,0)),wLeftLayerBottom&&(_extDrawers.length>0?(wLeftLayerBottom.scale.set(.0111125,.41275,.04445+.3048*wDepth),wLeftLayerBottom.position.set(-(.00555625+wBack.scale.x/2),wLeftLayerBottom.scale.y/2+wBottom.position.y-.0635-wBottom.scale.y/2,0)):(wLeftLayerBottom.scale.set(.0111125,.0746125,.04445+.3048*wDepth),wLeftLayerBottom.position.set(-(.00555625+wBack.scale.x/2),wLeftLayerBottom.scale.y/2+wBottom.position.y-.0635-wBottom.scale.y/2,0))),wLeftLayerTop&&(wLeftLayerTop.scale.set(.0111125,.0111125,.04445+.3048*wDepth),wLeftLayerTop.position.set(-(.00555625+wBack.scale.x/2),wTopLayer.position.y,0)),wLeft&&(isHingedDoor?(wLeftLayer.visible=!1,wLeftLayerBottom.visible=!1,wLeftLayerTop.visible=!1,wLeft.scale.set(.022225,.3048*wHeight,.04445+.3048*wDepth),wLeft.position.set(-(.0111125+wBack.scale.x/2),wLeft.scale.y/2+wBottom.position.y-.0635-wBottom.scale.y/2,0)):(wLeftLayer.visible=!0,wLeftLayerBottom.visible=!0,wLeftLayerTop.visible=!0,wLeft.scale.set(.022225,.3048*wHeight,.04445+.3048*wDepth-.03429),wLeft.position.set(-(.0111125+wBack.scale.x/2),wLeft.scale.y/2+wBottom.position.y-.0635-wBottom.scale.y/2,-.017145))),wRightLayer&&(wRightLayer.scale.set(.0111125,.3048*wHeight,.04445+.3048*wDepth),wRightLayer.position.set(.022225+wBack.scale.x/2-wRightLayer.scale.x/2,wRightLayer.scale.y/2+wBottom.position.y-.0635-wBottom.scale.y/2,0)),wRightLayerTop&&(wRightLayerTop.scale.set(.0111125,.0111125,.04445+.3048*wDepth),wRightLayerTop.position.set(.00555625+wBack.scale.x/2,wTopLayer.position.y,0)),wRightLayerBottom&&(_extDrawers.length>0?(wRightLayerBottom.scale.set(.0111125,.41275,.04445+.3048*wDepth),wRightLayerBottom.position.set(.00555625+wBack.scale.x/2,wRightLayerBottom.scale.y/2+wBottom.position.y-.0635-wBottom.scale.y/2,0)):(wRightLayerBottom.scale.set(.0111125,.0746125,.04445+.3048*wDepth),wRightLayerBottom.position.set(.00555625+wBack.scale.x/2,wRightLayerBottom.scale.y/2+wBottom.position.y-.0635-wBottom.scale.y/2,0))),wRight&&(isHingedDoor?(wRightLayer.visible=!1,wRightLayerBottom.visible=!1,wRightLayerTop.visible=!1,wRight.scale.set(.022225,.3048*wHeight,.04445+.3048*wDepth),wRight.position.set(.0111125+wBack.scale.x/2,wRight.scale.y/2+wBottom.position.y-.0635-wBottom.scale.y/2,0)):(wRightLayer.visible=!0,wRightLayerBottom.visible=!0,wRightLayerTop.visible=!0,wRight.scale.set(.022225,.3048*wHeight,.04445+.3048*wDepth-.03429),wRight.position.set(.0111125+wBack.scale.x/2,wRight.scale.y/2+wBottom.position.y-.0635-wBottom.scale.y/2,-.017145))),wpLoftBottom&&(wpLoftBottom.scale.set(.3048*wWidth,.022225,.3048*wDepth+.04445),wpLoftBottom.position.set(wTop.position.x,wTop.position.y+wpLoftBottom.scale.y,wTopLayer.position.z)),wpLoftBack&&(wpLoftBack.scale.set(.3048*wWidth+(wpLoftLeft.scale.x+wpLoftRight.scale.x),.3048*wLoft,.022225),wpLoftBack.position.set(0,wpLoftBottom.position.y+wpLoftBack.scale.y/2-wpLoftBottom.scale.y/2,-wpLoftBottom.scale.z/2+.0111125)),wpLoftLeft&&(wpLoftLeft.scale.set(.022225,.3048*wLoft,.3048*wDepth+.04445),wpLoftLeft.position.set(-(.0111125+wpLoftBottom.scale.x/2),wpLoftBottom.position.y+wpLoftLeft.scale.y/2-wpLoftBottom.scale.y/2,0)),wpLoftRight&&(wpLoftRight.scale.set(.022225,.3048*wLoft,.3048*wDepth+.04445),wpLoftRight.position.set(.0111125+wpLoftBottom.scale.x/2,wpLoftBottom.position.y+wpLoftRight.scale.y/2-wpLoftBottom.scale.y/2,0)),wpLoftTop&&(wpLoftTop.scale.set(.3048*wWidth,.022225,.3048*wDepth+.022225),wpLoftTop.position.set(0,wpLoftBack.scale.y+wpLoftBottom.position.y-.022225,.0111125))}function createHorizontalSplitter(index){var g=new THREE.BoxGeometry(1,1,1),_splitter=new THREE.Mesh(g,_splitterMaterial);_splitter.name="w_h_splitter_"+index,_m_splitters[index]=_splitter,_m_splitters_group.name="w_h_splitters",_m_splitters_group.add(_m_splitters[index]),scene.add(_m_splitters_group)}function removeHorizontalSplitter(index){null!=index?(_m_splitters.forEach(e=>{_m_splitters[index]instanceof THREE.Mesh&&_m_splitters[index]==e&&_m_splitters_group instanceof THREE.Group&&_m_splitters_group.remove(e)}),_m_splitters[index]=null):(_m_splitters.forEach(e=>{e instanceof THREE.Mesh&&_m_splitters_group instanceof THREE.Group&&(_m_splitters_group.remove(e),scene.remove(_m_splitters_group))}),_m_splitters=[])}function createExternalDrawer(index){var g=new THREE.BoxGeometry(1,1,1),_ext=new THREE.Mesh(g,_extDrawerMaterial);_ext.name="_ext_d_large_"+index,_extDrawers[index]=_ext,_extDrawers_group.name="w_ext_d_large",_extDrawers_group.add(_extDrawers[index]),scene.add(_extDrawers_group),createExternalDrawerSplitters(index)}function createExternalDrawerSplitters(index){var g=new THREE.BoxGeometry(1,1,1),_splitter=new THREE.Mesh(g,_splitterMaterial);_splitter.name="w_ext_d_splitter_"+index,_extDrawers_splitters[index]=_splitter,_extDrawers_splitters_group.name="w_ext_d_splitters",_extDrawers_splitters_group.add(_extDrawers_splitters[index]),scene.add(_extDrawers_splitters_group)}function updateExternalDrawer(index){_extDrawers[index]instanceof THREE.Mesh&&(_extDrawers[index].scale.set(offset-.022225,.3048,.3048*wDepth+.022225),_extDrawers[index].position.set(index*offset,wBottom.position.y+_extDrawers[index].scale.y/2+.0111125,.3048*wDepth-_extDrawers[index].scale.z+2*wBack.scale.z-.0111125),_extDrawers_group.position.set(offset/2+wLeft.position.x,_extDrawers_group.position.y,_extDrawers_group.position.z)),_extDrawers_splitters[index]instanceof THREE.Mesh&&(_extDrawers_splitters[index].scale.set(offset-.022225,_m_splitters[index].scale.y,.3048*wDepth+.022225),_extDrawers_splitters[index].position.set(_extDrawers[index].position.x,_extDrawers[index].position.y+_extDrawers[index].scale.y/2+.0111125,_extDrawers[index].position.z),_extDrawers_splitters_group.position.set(offset/2+wLeft.position.x,_extDrawers_splitters_group.position.y,_extDrawers_splitters_group.position.z))}function removeExternalDrawer(index){null!=index?(_extDrawers.forEach(e=>{_extDrawers[index]instanceof THREE.Mesh&&_extDrawers[index]==e&&_extDrawers_group instanceof THREE.Group&&_extDrawers_group.remove(e)}),_extDrawers[index]=null,_extDrawers_splitters.forEach(e=>{_extDrawers_splitters[index]instanceof THREE.Mesh&&_extDrawers_splitters[index]==e&&_extDrawers_splitters_group instanceof THREE.Group&&_extDrawers_splitters_group.remove(e)}),_extDrawers_splitters_group[index]=null):(_extDrawers.forEach(e=>{e instanceof THREE.Mesh&&_extDrawers_group instanceof THREE.Group&&(_extDrawers_group.remove(e),scene.remove(_extDrawers_group))}),_extDrawers=[],_extDrawers_splitters.forEach(e=>{e instanceof THREE.Mesh&&_extDrawers_splitters_group instanceof THREE.Group&&(_extDrawers_splitters_group.remove(e),scene.remove(_extDrawers_splitters_group))}),_extDrawers_splitters=[])}function createInternalDrawerLarge(index){var g=new THREE.BoxGeometry(1,1,1),_large_int=new THREE.Mesh(g,_intLargeMaterial);_large_int.name="_int_d_large_"+index,_largeIntDrawers[index]=_large_int,_largeIntDrawers_group.name="w_int_d_large",_largeIntDrawers_group.add(_largeIntDrawers[index]),scene.add(_largeIntDrawers_group),createInternalDrawerLargeSplitters(index)}function createInternalDrawerLargeSplitters(index){var g=new THREE.BoxGeometry(1,1,1),_splitter=new THREE.Mesh(g,_splitterMaterial);_splitter.name="w_int_d_splitter_"+index,_largeIntDrawers_splitters[index]=_splitter,_largeIntDrawers_splitters_group.name="w_int_d_splitters",_largeIntDrawers_splitters_group.add(_largeIntDrawers_splitters[index]),scene.add(_largeIntDrawers_splitters_group)}function updateInternalDrawerLarge(index){_largeIntDrawers[index]instanceof THREE.Mesh&&(_largeIntDrawers[index].scale.set(_m_splitters[index].scale.x,.254,_m_splitters[index].scale.z),_extDrawers[index]?_largeIntDrawers[index].position.set(index*offset,_extDrawers_splitters[index].position.y+_largeIntDrawers[index].scale.y/2+.0111125,_m_splitters[index].position.z):_largeIntDrawers[index].position.set(index*offset,wBottom.position.y+_largeIntDrawers[index].scale.y/2+.0111125,_m_splitters[index].position.z),_largeIntDrawers_group.position.set(offset/2+wLeft.position.x,_largeIntDrawers_group.position.y,_largeIntDrawers_group.position.z)),_largeIntDrawers[index]instanceof THREE.Mesh&&(_largeIntDrawers_splitters[index].scale.set(_m_splitters[index].scale.x,_m_splitters[index].scale.y,_m_splitters[index].scale.z),_largeIntDrawers_splitters[index].position.set(_largeIntDrawers[index].position.x,_largeIntDrawers[index].position.y+_largeIntDrawers[index].scale.y/2+.0111125,_m_splitters[index].position.z),_largeIntDrawers_splitters_group.position.set(offset/2+wLeft.position.x,_largeIntDrawers_splitters_group.position.y,_largeIntDrawers_splitters_group.position.z))}function removeInternalDrawerLarge(index){index?(_largeIntDrawers.forEach(e=>{_largeIntDrawers[index]instanceof THREE.Mesh&&_largeIntDrawers[index]==e&&_largeIntDrawers_group instanceof THREE.Group&&_largeIntDrawers_group.remove(e)}),_largeIntDrawers[index]=null,_largeIntDrawers_splitters.forEach(e=>{_largeIntDrawers_splitters[index]instanceof THREE.Mesh&&_largeIntDrawers_splitters[index]==e&&_largeIntDrawers_splitters_group instanceof THREE.Group&&_largeIntDrawers_splitters_group.remove(e)}),_largeIntDrawers_splitters_group[index]=null):(_largeIntDrawers.forEach(e=>{e instanceof THREE.Mesh&&_largeIntDrawers_group instanceof THREE.Group&&(_largeIntDrawers_group.remove(e),scene.remove(_largeIntDrawers_group))}),_largeIntDrawers=[],_largeIntDrawers_splitters.forEach(e=>{e instanceof THREE.Mesh&&_largeIntDrawers_splitters_group instanceof THREE.Group&&(_largeIntDrawers_splitters_group.remove(e),scene.remove(_largeIntDrawers_splitters_group))}),_largeIntDrawers_splitters=[])}function createLocker(index){var g=new THREE.BoxGeometry(1,1,1),_locker=new THREE.Mesh(g,_lockerMaterial);_locker.name="_locker_"+index,_lockers[index]=_locker,_locker_group.name="w_lockers",_locker_group.add(_lockers[index]),scene.add(_locker_group),createLockerSplitter(index)}function createLockerSplitter(index){var g=new THREE.BoxGeometry(1,1,1),_splitter=new THREE.Mesh(g,_splitterMaterial);_splitter.name="_locker_splitter_"+index,_locker_splitters[index]=_splitter,_locker_splitter_group.name="w_locker_splitters",_locker_splitter_group.add(_locker_splitters[index]),scene.add(_locker_splitter_group)}function updateLocker(index){_lockers[index]instanceof THREE.Mesh&&(_lockers[index].scale.set(_m_splitters[index].scale.x,.180975,_m_splitters[index].scale.z),_lockers[index].position.set(index*offset,_m_splitters[index].position.y-_m_splitters[index].scale.y/2-_lockers[index].scale.y/2,_m_splitters[index].position.z)),_locker_group.position.set(offset/2+wLeft.position.x,_locker_group.position.y,_locker_group.position.z),_locker_splitters[index]instanceof THREE.Mesh&&(_locker_splitters[index].scale.set(_m_splitters[index].scale.x,_m_splitters[index].scale.y,_m_splitters[index].scale.z),_locker_splitters[index].position.set(_lockers[index].position.x,_lockers[index].position.y-_lockers[index].scale.y/2-.0111125,_lockers[index].position.z)),_locker_splitter_group.position.set(offset/2+wLeft.position.x,_locker_splitter_group.position.y,_locker_splitter_group.position.z)}function removeLocker(index){index?(_lockers.forEach(e=>{_lockers[index]instanceof THREE.Mesh&&_lockers[index]==e&&_locker_group instanceof THREE.Group&&_locker_group.remove(e)}),_lockers[index]=null,_locker_splitters.forEach(e=>{_locker_splitters[index]instanceof THREE.Mesh&&_locker_splitters[index]==e&&_locker_splitter_group instanceof THREE.Group&&_locker_splitter_group.remove(e)}),_locker_splitter_group[index]=null):(_lockers.forEach(e=>{e instanceof THREE.Mesh&&_locker_group instanceof THREE.Group&&(_locker_group.remove(e),scene.remove(_locker_group))}),_lockers=[],_locker_splitters.forEach(e=>{e instanceof THREE.Mesh&&_locker_splitter_group instanceof THREE.Group&&(_locker_splitter_group.remove(e),scene.remove(_locker_splitter_group))}),_locker_splitters=[])}function createInternalDrawerSmall(index){var g=new THREE.BoxGeometry(1,1,1),_small_int=new THREE.Mesh(g,_intSmallMaterial);_small_int.name="_int_d_small_"+index,_smallIntDrawers[index]=_small_int,_smallIntDrawers_group.name="w_int_d_small",_smallIntDrawers_group.add(_smallIntDrawers[index]),scene.add(_smallIntDrawers_group)}function updateInternalDrawerSmall(index){_smallIntDrawers[index]instanceof THREE.Mesh&&(_smallIntDrawers[index].scale.set(_m_splitters[index].scale.x,.2032,_m_splitters[index].scale.z),_smallIntDrawers_group.position.set(offset/2+wLeft.position.x,_smallIntDrawers_group.position.y,_smallIntDrawers_group.position.z),_lockers[index]?_smallIntDrawers[index].position.set(index*offset,_lockers[index].position.y-_smallIntDrawers[index].scale.y-.0111125,_m_splitters[index].position.z):_smallIntDrawers[index].position.set(index*offset,_m_splitters[index].position.y-_smallIntDrawers[index].scale.y/2-.0111125,_m_splitters[index].position.z))}function removeInternalDrawerSmall(index){index?(_smallIntDrawers.forEach(e=>{_smallIntDrawers[index]instanceof THREE.Mesh&&_smallIntDrawers[index]==e&&_smallIntDrawers_group instanceof THREE.Group&&_smallIntDrawers_group.remove(e)}),_smallIntDrawers[index]=null,_smallIntDrawers_splitters.forEach(e=>{_smallIntDrawers_group[index]instanceof THREE.Mesh&&_smallIntDrawers_group[index]==e&&_smallIntDrawers_splitters_group instanceof THREE.Group&&_smallIntDrawers_splitters_group.remove(e)}),_smallIntDrawers_splitters[index]=null):(_smallIntDrawers.forEach(e=>{e instanceof THREE.Mesh&&_smallIntDrawers_group instanceof THREE.Group&&(_smallIntDrawers_group.remove(e),scene.remove(_smallIntDrawers_group))}),_smallIntDrawers=[],_smallIntDrawers_splitters.forEach(e=>{e instanceof THREE.Mesh&&_smallIntDrawers_splitters_group instanceof THREE.Group&&(_smallIntDrawers_splitters_group.remove(e),scene.remove(_smallIntDrawers_splitters_group))}),_smallIntDrawers_splitters=[])}function createHanger(index){var g=new THREE.CylinderGeometry(.0254,.0254,1,32,1);_hangers[index]=new THREE.Mesh(g,_hangerMaterial),_hangers[index].name="w_hanger",_hangers[index].rotateZ(90*THREE.Math.DEG2RAD),_hanger_group.add(_hangers[index]),_hanger_group.name="w_hangers",scene.add(_hanger_group),removeTopShelves(index)}function updateHanger(index){_hangers[index]instanceof THREE.Mesh&&(_hangers[index].scale.set(1,offset-.022225,1),_hangers[index].position.set(index*offset,wTop.position.y-.0381-wTop.scale.y,wLeft.position.z/2),_hanger_group.position.set(offset/2+wLeft.position.x,_hanger_group.position.y,_hanger_group.position.z))}function removeHanger(index){index?(_hangers[index]instanceof THREE.Mesh&&_hanger_group instanceof THREE.Group&&_hanger_group.remove(_hangers[index]),_hangers[index]=null):(_hangers.forEach(e=>{e instanceof THREE.Mesh&&_hanger_group instanceof THREE.Group&&_hanger_group.remove(e)}),_hangers=[])}function createTopShelves(row,index){for(var g=new THREE.BoxGeometry(1,1,1),_top_shelves_group=new THREE.Group,i=0;i<row;i++)_top_shelves[i]=new THREE.Mesh(g,_shelfMaterial),_top_shelves[i].name="top_shelf_"+i,_top_shelves_group.add(_top_shelves[i]);_top_shelves_group.name="top_shelves_"+index,_top_shelves_parent[index]=_top_shelves_group,scene.add(_top_shelves_parent[index]),removeHanger(index)}function updateTopShelves(index){var vertical_offset=.3048;if(_top_shelves_parent[index]instanceof THREE.Group){for(var j=0;j<_top_shelves_parent[index].children.length;j++)_top_shelves_parent[index].children[j]instanceof THREE.Mesh&&(_top_shelves_parent[index].children[j].scale.set(offset-.022225,.022225,.3048*wDepth),_top_shelves_parent[index].children[j].position.set(index*offset,.3048*j,wLeft.position.z/2));_top_shelves_parent[index].position.set(offset/2+wLeft.position.x,wTop.position.y-.3048*_top_shelves_parent[index].children.length+.022225+wTop.scale.y/2,_top_shelves_parent[index].position.z)}}function removeTopShelves(index){index?(_top_shelves_parent.forEach(e=>{e instanceof THREE.Group&&index==_top_shelves_parent.indexOf(e)&&scene.remove(e)}),_top_shelves_parent[index]=null):(_top_shelves_parent.forEach(e=>{e instanceof THREE.Group&&scene.remove(e)}),_top_shelves_parent=[])}function createBotShelves(row,index){var g=new THREE.BoxGeometry(1,1,1);let _bot_group=new THREE.Group;for(var j=0;j<row;j++)_bot_shelves[j]=new THREE.Mesh(g,_shelfMaterial),_bot_shelves[j].name="bot_shelf_"+j,_bot_shelves[j].scale.set(offset-.022225,.022225,.3048*wDepth),_bot_group.add(_bot_shelves[j]);_bot_group.name="bot_shelves_"+index,_bot_shelf_parent[index]=_bot_group,scene.add(_bot_shelf_parent[index])}function removeBotShelves(index){index?(_bot_shelf_parent.forEach(e=>{e instanceof THREE.Group&&index==_bot_shelf_parent.indexOf(e)&&scene.remove(e)}),_bot_shelf_parent[index]=null):(_bot_shelf_parent.forEach(e=>{e instanceof THREE.Group&&scene.remove(e)}),_bot_shelf_parent=[])}function updateBotShelves(index){var vertical_offset=-1,pos=0,dist;if(_bot_shelf_parent[index]instanceof THREE.Group){if(_lockers[index]?_bot_shelf_parent[index]&&(_smallIntDrawers[index]||_largeIntDrawers[index]||_extDrawers[index]?_largeIntDrawers[index]||_extDrawers[index]||!_smallIntDrawers[index]?!_largeIntDrawers[index]&&_extDrawers[index]?(vertical_offset=(dist=_lockers[index].position.y-_lockers[index].scale.y/2-(_extDrawers[index].scale.y/2+_extDrawers[index].position.y))/(_bot_shelf_parent[index].children.length+1)+.875/(12*_bot_shelf_parent[index].children.length)*.3048,pos=_lockers[index].position.y-_lockers[index].scale.y/2-vertical_offset+.875/(12*_bot_shelf_parent[index].children.length)*.3048):_largeIntDrawers[index]&&!_smallIntDrawers[index]?(vertical_offset=(dist=_lockers[index].position.y-_lockers[index].scale.y/2-(_largeIntDrawers[index].scale.y/2+_largeIntDrawers[index].position.y))/(_bot_shelf_parent[index].children.length+1)+.875/(12*_bot_shelf_parent[index].children.length)*.3048,pos=_lockers[index].position.y-_lockers[index].scale.y/2-vertical_offset+.875/(12*_bot_shelf_parent[index].children.length)*.3048):_largeIntDrawers[index]&&_smallIntDrawers[index]&&_bot_shelf_parent[index].children.length<2&&(vertical_offset=(dist=_smallIntDrawers[index].position.y-_smallIntDrawers[index].scale.y/2-(_largeIntDrawers[index].scale.y/2+_largeIntDrawers[index].position.y))/(_bot_shelf_parent[index].children.length+1)+.875/(12*_bot_shelf_parent[index].children.length)*.3048,pos=_smallIntDrawers[index].position.y-_smallIntDrawers[index].scale.y/2-vertical_offset+.875/(12*_bot_shelf_parent[index].children.length)*.3048):_bot_shelf_parent[index].children.length>1?(vertical_offset=(dist=_smallIntDrawers[index].position.y+_smallIntDrawers[index].scale.y/2+(wBottom.scale.y/2-wBottom.position.y))/(_bot_shelf_parent[index].children.length+1)-(.875*_bot_shelf_parent[index].children.length/12*.3048-.0111125),pos=_smallIntDrawers[index].position.y-_smallIntDrawers[index].scale.y/2-vertical_offset+.0111125):(vertical_offset=(dist=_smallIntDrawers[index].position.y-_smallIntDrawers[index].scale.y/2-(wBottom.scale.y/2+wBottom.position.y))/(_bot_shelf_parent[index].children.length+1)+.875/(12*_bot_shelf_parent[index].children.length)*.3048,pos=_smallIntDrawers[index].position.y-_smallIntDrawers[index].scale.y/2-vertical_offset+.875/(12*_bot_shelf_parent[index].children.length)*.3048):_bot_shelf_parent[index].children.length>1?(vertical_offset=(dist=_lockers[index].position.y-wBottom.position.y)/(_bot_shelf_parent[index].children.length+1)-.022225,pos=_lockers[index].position.y-_lockers[index].scale.y/2-_bot_shelf_parent[index].children.length*vertical_offset+.022225):(vertical_offset=(dist=_lockers[index].position.y-_lockers[index].scale.y/2-(wBottom.scale.y/2+wBottom.position.y))/(_bot_shelf_parent[index].children.length+1)+.875/(12*_bot_shelf_parent[index].children.length)*.3048,pos=_lockers[index].position.y-_lockers[index].scale.y/2-vertical_offset+.875/(12*_bot_shelf_parent[index].children.length)*.3048)):_bot_shelf_parent[index]&&(_smallIntDrawers[index]||_largeIntDrawers[index]||_extDrawers[index]||wHeight>6&&(vertical_offset=(dist=_m_splitters[index].position.y-wBottom.position.y)/(_bot_shelf_parent[index].children.length+1),pos=_m_splitters[index].position.y-_m_splitters[index].scale.y/2-_bot_shelf_parent[index].children.length*vertical_offset+.0111125),!_largeIntDrawers[index]||_smallIntDrawers[index]||_extDrawers[index]?!_smallIntDrawers[index]||_largeIntDrawers[index]||_extDrawers[index]?_smallIntDrawers[index]&&!_largeIntDrawers[index]&&_extDrawers[index]?(vertical_offset=(dist=_smallIntDrawers[index].position.y-_smallIntDrawers[index].scale.y/2-(_extDrawers[index].scale.y/2+_extDrawers[index].position.y))/(_bot_shelf_parent[index].children.length+1)-.875*_bot_shelf_parent[index].children.length/12*.3048,pos=_smallIntDrawers[index].position.y-_smallIntDrawers[index].scale.y/2-vertical_offset-.022225):_smallIntDrawers[index]&&_largeIntDrawers[index]&&!_extDrawers[index]?(vertical_offset=(dist=_smallIntDrawers[index].position.y-_smallIntDrawers[index].scale.y/2-(_largeIntDrawers[index].scale.y/2+_largeIntDrawers[index].position.y))/(_bot_shelf_parent[index].children.length+1)-.875*_bot_shelf_parent[index].children.length/12*.3048,pos=_smallIntDrawers[index].position.y-_smallIntDrawers[index].scale.y/2-vertical_offset-.022225):_smallIntDrawers[index]&&_largeIntDrawers[index]&&_extDrawers[index]?(vertical_offset=(dist=_smallIntDrawers[index].position.y-_smallIntDrawers[index].scale.y/2-(_largeIntDrawers[index].scale.y/2+_largeIntDrawers[index].position.y))/(_bot_shelf_parent[index].children.length+1)-.875*_bot_shelf_parent[index].children.length/12*.3048,pos=_smallIntDrawers[index].position.y-_smallIntDrawers[index].scale.y/2-vertical_offset-.022225):_smallIntDrawers[index]||_largeIntDrawers[index]||!_extDrawers[index]?!_smallIntDrawers[index]&&_largeIntDrawers[index]&&_extDrawers[index]&&(vertical_offset=(dist=_m_splitters[index].position.y-_m_splitters[index].scale.y/2-(_largeIntDrawers[index].scale.y/2+_largeIntDrawers[index].position.y))/(_bot_shelf_parent[index].children.length+1)+.875/(12*_bot_shelf_parent[index].children.length)*.3048,pos=_m_splitters[index].position.y-_m_splitters[index].scale.y/2-vertical_offset+.875/(12*_bot_shelf_parent[index].children.length+1)*.3048):(vertical_offset=(dist=_m_splitters[index].position.y-_m_splitters[index].scale.y/2-(_extDrawers[index].scale.y/2+_extDrawers[index].position.y))/(_bot_shelf_parent[index].children.length+1)+.875/(12*_bot_shelf_parent[index].children.length)*.3048,pos=_m_splitters[index].position.y-_m_splitters[index].scale.y/2-vertical_offset+.875/(12*_bot_shelf_parent[index].children.length)*.3048):_bot_shelf_parent[index].children.length>1?(vertical_offset=(dist=_smallIntDrawers[index].position.y-wBottom.position.y)/(_bot_shelf_parent[index].children.length+1)-.022225,pos=_smallIntDrawers[index].position.y-_smallIntDrawers[index].scale.y/2-_bot_shelf_parent[index].children.length*vertical_offset+.022225):(vertical_offset=(dist=_smallIntDrawers[index].position.y-wBottom.position.y)/(_bot_shelf_parent[index].children.length+1)-.0111125,pos=_smallIntDrawers[index].position.y-_smallIntDrawers[index].scale.y/2-vertical_offset+.04445):_bot_shelf_parent[index].children.length>1?(vertical_offset=(dist=_m_splitters[index].position.y-_m_splitters[index].scale.y/2-(_largeIntDrawers[index].scale.y/2+_largeIntDrawers[index].position.y))/(_bot_shelf_parent[index].children.length+1)-.022225,pos=_m_splitters[index].position.y-_m_splitters[index].scale.y/2-_bot_shelf_parent[index].children.length*vertical_offset-.022225):(vertical_offset=(dist=_m_splitters[index].position.y-_m_splitters[index].scale.y/2-(_largeIntDrawers[index].scale.y/2+_largeIntDrawers[index].position.y))/(_bot_shelf_parent[index].children.length+1)-.0111125,pos=_m_splitters[index].position.y-_m_splitters[index].scale.y/2-vertical_offset+.875/(12*_bot_shelf_parent[index].children.length)*.3048)),_bot_shelf_parent[index]instanceof THREE.Group)for(var j=0;j<_bot_shelf_parent[index].children.length;j++)_bot_shelf_parent[index].children[j]instanceof THREE.Mesh&&(_bot_shelf_parent[index].children[j].scale.set(offset-.022225,.022225,.3048*wDepth),_bot_shelf_parent[index].children[j].position.set(index*offset,j*vertical_offset,wLeft.position.z/2+.0111125));_bot_shelf_parent[index].position.set(offset/2+wLeft.position.x,pos,_bot_shelf_parent[index].position.z)}}function updateBotShelvesScale(index,vertical_offset){}function createInteractivePlane(index){var g=new THREE.PlaneGeometry(1,1),m=new THREE.MeshBasicMaterial({color:0,transparent:!0,opacity:0});m.name="im_plane";var _plane=new THREE.Mesh(g,m);_plane.name="interactive_"+index,_plane.scale.set(offset,.3048,.3048*wDepth),interactivePlanes[index]=_plane,interactivePlane_group.add(interactivePlanes[index]),interactivePlane_group.name="i_planes",scene.add(interactivePlane_group)}function updateInteractivePlane(index){interactivePlanes[index]instanceof THREE.Mesh&&(interactivePlanes[index].scale.set(offset-.022225,.3048*wHeight-.0635+.022225-wBottom.position.y),interactivePlanes[index].position.set(index*offset,wBack.position.y,wBottom.scale.z/2)),interactivePlane_group.position.set(offset/2+wLeft.position.x,interactivePlane_group.position.y,interactivePlane_group.position.z),column_id.push(index)}function removeInteractivePlane(index){index?(interactivePlanes[index]instanceof THREE.Mesh&&interactivePlane_group.remove(interactivePlanes[index]),interactivePlanes[index]=null):(interactivePlanes.forEach(e=>{e instanceof THREE.Mesh&&interactivePlane_group instanceof THREE.Group&&interactivePlane_group.remove(e)}),interactivePlanes=[])}function helpers(){}function onClick(){if(selectedObject){for(var i=0;i<columns;i++)_columns[i]==selectedObject&&(_columns[i-1]&&(adjacentParts.push(_columns[i-1]),deleteSprites_group.remove(deleteSprites[i-1])),_columns[i+1]&&(deleteSprites_group.remove(deleteSprites[i+1]),adjacentParts.push(_columns[i+1])),removed_index=i,removed_id.push(i),deleteSprites_group.remove(deleteSprites[i]),_columns_group.remove(_columns[i]),removed.push(_columns[i]));selectedObject=null}if(selectedPlane)if(isMirrorAdded)planeOultinePass.selectedObjects=[],selectedPlane=null;else{if(interactivePlane_group.visible)for(var i=0;i<interactivePlanes.length;i++)interactivePlanes[i]==selectedPlane&&(addSelectedObject(selectedPlane),planeOultinePass.visibleEdgeColor.set("#ff7300"),planeOultinePass.edgeStrength=10,planeOultinePass.edgeGlow=0,planeOultinePass.selectedObjects=selectedObjects,plane_index=i);else planeOultinePass.selectedObjects=[];selectedPlane=null}var flipIndex;selectedMirror&&(flipVerticalSprite.includes(selectedMirror)&&_flipDoor(flipVerticalSprite.indexOf(selectedMirror)));selectedDoor&&isMirrorAdded&&_hDoors_parent.forEach(e=>{e.traverse((function(child){child.material=_mirrorMaterials,child.material.needsUpdate=!0}))})}function onPointerMove(event){selectedSprite instanceof THREE.Sprite&&(selectedSprite.visible?(selectedSprite.material.map=onNormalDeleteSprite,deleteSprites.forEach(e=>{e==selectedSprite&&_columns.forEach(c=>{_columns.indexOf(c)==deleteSprites.indexOf(e)&&(selectedObject=c,adjacentParts.forEach(e=>{e==selectedObject&&(selectedSprite=null)}))})})):selectedObject=null),selectedDoor&&(isMirrorAdded?(addSelectedObject(selectedDoor),doorOutlinePass.visibleEdgeColor.set("#fcbe03"),doorOutlinePass.edgeStrength=10,doorOutlinePass.edgeGlow=0,doorOutlinePass.selectedObjects=selectedObjects):(doorOutlinePass.selectedObjects=[],selectedDoor=null)),selectedMirror&&(selectedMirror.material.map=onNormalFlipSprite,selectedMirror=null),selectedPlane?isMirrorAdded?outlinePass.selectedObjects=[]:(outlinePass.visibleEdgeColor.set("#fcbe03"),outlinePass.edgeStrength=10,outlinePass.edgeGlow=0,outlinePass.selectedObjects=selectedObjects,selectedPlane=null):outlinePass.selectedObjects=[],event.changedTouches?(pointer.x=event.changedTouches[0].pageX,pointer.y=event.changedTouches[0].pageY):(pointer.x=event.clientX,pointer.y=event.clientY),pointer.x=event.clientX/fwidth*2-1,pointer.y=-event.clientY/fheight*2+1,raycaster.setFromCamera(pointer,camera);const removeIcons=raycaster.intersectObject(deleteSprites_group,!0),mirrorIcons=raycaster.intersectObject(flipVertical_group,!0),p=raycaster.intersectObject(interactivePlane_group,!0),doors=raycaster.intersectObject(_hDoors_parent_group,!0);if(doors.length>0){const res=doors.filter((function(res){return res&&res.object}))[0];res&&res.object&&(selectedDoor=res.object)}if(mirrorIcons.length>0){const res=mirrorIcons.filter((function(res){return res&&res.object}))[0];res&&res.object&&(selectedMirror=res.object,selectedMirror.material.map=onHoverFlipSprite)}if(removeIcons.length>0){const res=removeIcons.filter((function(res){return res&&res.object}))[0];res&&res.object&&(selectedSprite=res.object,selectedSprite.material.map=onHoverDeleteSprite)}else selectedObject=null;if(p.length>0){const res=p.filter((function(res){return res&&res.object}))[0];getColumnToCopy(),res&&res.object&&(selectedPlane=res.object,addSelectedObject(selectedPlane))}}function addSelectedObject(object){selectedObjects=[],selectedObjects.push(object)}init(),animate(),getInputs(),addHorizontalParts();const link=document.createElement("a");function save(blob,filename){link.href=URL.createObjectURL(blob),link.download=filename,link.click()}function saveString(text,filename){save(new Blob([text],{type:"text/plain"}),filename)}function saveArrayBuffer(buffer,filename){save(new Blob([buffer],{type:"application/octet-stream"}),filename)}function Export(){interactivePlane_group.visible=!1,floor.visible=!1,wall.visible=!1,wallLeft.visible=!1,wallRight.visible=!1,exporter.parse(scene,(function(gltf){if(gltf instanceof ArrayBuffer)saveArrayBuffer(gltf,"wardrobe.glb");else{const output=JSON.stringify(gltf,null,2);console.log(output),saveString(output,"wardrobe.gltf"),floor.visible=!0,wall.visible=!0,wallLeft.visible=!0,wallRight.visible=!0}}),(function(error){console.log("An error happened")}))}function post_process(){composer=new THREE.EffectComposer(renderer);const renderPass=new THREE.RenderPass(scene,camera);renderPass.clearColor=new THREE.Color(0,0,0),renderPass.clearAlpha=0,composer.addPass(renderPass);const pixelRatio=renderer.getPixelRatio(),smaaPass=new THREE.SMAAPass(fwidth*pixelRatio,fheight*pixelRatio);composer.addPass(smaaPass);const ssaaPass=new THREE.SSAARenderPass(scene,camera);composer.addPass(ssaaPass);const copyPass=new THREE.ShaderPass(THREE.CopyShader);composer.addPass(copyPass),ssaoPass=new THREE.SSAOPass(scene,camera,fwidth,fheight),ssaoPass.kernalRadius=16,ssaoPass.minDistance=.005,ssaoPass.maxDistance=.1,outlinePass=new THREE.OutlinePass(new THREE.Vector2(fwidth,fheight),scene,camera),outlinePass.edgeStrength=16,outlinePass.edgeGlow=0,outlinePass.edgeThickness=.5,outlinePass.pulsePeriod=0,planeOultinePass=new THREE.OutlinePass(new THREE.Vector2(fwidth,fheight),scene,camera),planeOultinePass.edgeStrength=16,planeOultinePass.edgeGlow=0,planeOultinePass.edgeThickness=.5,planeOultinePass.pulsePeriod=0,doorOutlinePass=new THREE.OutlinePass(new THREE.Vector2(fwidth,fheight),scene,camera),doorOutlinePass.edgeStrength=16,doorOutlinePass.edgeGlow=0,doorOutlinePass.edgeThickness=.5,doorOutlinePass.pulsePeriod=0,composer.addPass(outlinePass),composer.addPass(planeOultinePass),composer.addPass(doorOutlinePass)}function getColumnToCopy(){for(;cp.firstChild;)cp.removeChild(cp.firstChild);for(var i=0;i<=customColumns;i++){var op=document.createElement("option");0!=i?(op.setAttribute("value",i),op.innerHTML=i,cp.appendChild(op)):(op.innerHTML="Select Column",cp.appendChild(op))}}function pasetToColumn(index){index>-1&&(_hangers[plane_index]&&(createHanger(index),updateHanger(index)),_top_shelves_parent[plane_index]&&(createTopShelves(2,index),updateTopShelves(index)),_bot_shelf_parent[plane_index]&&(createBotShelves(onHeightChanged(index),index),updateBotShelves(index)),_lockers[plane_index]&&(createLocker(index),updateLocker(index),updateInternalDrawerSmall(index),updateBotShelves(index)),_smallIntDrawers[plane_index]&&(createInternalDrawerSmall(index),updateInternalDrawerSmall(index),updateBotShelves(index)),_largeIntDrawers[plane_index]&&(createInternalDrawerLarge(index),updateInternalDrawerLarge(index),updateBotShelves(index)))}function chooseColumns_number(){if(wWidth>2.5&&wWidth<3.5?substitubale=0:wWidth>3&&wWidth<5?substitubale=1:wWidth>3.5&&wWidth<6.5?substitubale=2:wWidth>6&&wWidth<8?substitubale=3:wWidth>7&&wWidth<=9?substitubale=4:wWidth>9&&wWidth<11?substitubale=5:wWidth>10&&wWidth<=12&&(substitubale=6),isHingedDoor){for(columns=9.5==wWidth?10:Math.floor(wWidth),customColumns=columns;columns_group.firstChild;)columns_group.removeChild(columns_group.firstChild);for(var i=columns-1;i>substitubale;i--){var columns_div=document.createElement("div");columns_div.className="form-check form-check-inline";var columns_radio=document.createElement("input");columns_radio.type="radio",columns_radio.value=i+1,columns_radio.id="columns_"+(i+1),columns_radio.setAttribute("onclick","set_columns_number("+(i+1)+")"),columns_radio.className="form-check-input columns-change  btn-check",columns_radio.name="columnsOptions";var columns_label=document.createElement("label");columns_label.htmlFor="columns_"+(i+1),columns_label.className="form-check-label btn btn-outline-secondary m-1",columns_label.innerHTML=i+1,columns_div.appendChild(columns_radio),columns_div.appendChild(columns_label),columns_group.appendChild(columns_div)}}else columns=wWidth>=3.5&&wWidth<=6?4:wWidth>=6.5&&wWidth<=9.5?8:wWidth>=10&&wWidth<=12?12:2,customColumns=columns}function set_columns_number(value){customColumns=value}function reset_adjacents_removed_columns(){removed=[],adjacentParts=[]}function onHeightChanged(plane_index){var row=0;return 6==wHeight?row=(_largeIntDrawers[plane_index]||_smallIntDrawers[plane_index]||!_lockers[plane_index]||_extDrawers[plane_index])&&(_largeIntDrawers[plane_index]||!_smallIntDrawers[plane_index]||_lockers[plane_index]||_extDrawers[plane_index])?0:1:6.5==wHeight?_extDrawers[plane_index]?row=!_largeIntDrawers[plane_index]||_smallIntDrawers[plane_index]||_lockers[plane_index]?1:0:_extDrawers[plane_index]||(row=_largeIntDrawers[plane_index]||_smallIntDrawers[plane_index]||_lockers[plane_index]?_largeIntDrawers[plane_index]&&_smallIntDrawers[plane_index]&&_lockers[plane_index]?0:1:2):7==wHeight?_lockers[plane_index]?row=_largeIntDrawers[plane_index]||_smallIntDrawers[plane_index]||_extDrawers[plane_index]?(_largeIntDrawers[plane_index]||_smallIntDrawers[plane_index]||!_extDrawers[plane_index])&&(!_largeIntDrawers[plane_index]||_smallIntDrawers[plane_index]||_extDrawers[plane_index])?_largeIntDrawers[plane_index]&&!_smallIntDrawers[plane_index]&&_extDrawers[plane_index]?0:_largeIntDrawers[plane_index]||!_smallIntDrawers[plane_index]||_extDrawers[plane_index]?(!_largeIntDrawers[plane_index]&&_smallIntDrawers[plane_index]&&_extDrawers[plane_index],0):1:1:2:_largeIntDrawers[plane_index]||_smallIntDrawers[plane_index]||_extDrawers[plane_index]?_smallIntDrawers[plane_index]&&!_largeIntDrawers[plane_index]?row=_extDrawers[plane_index]?_extDrawers[plane_index]?1:0:2:_largeIntDrawers[plane_index]&&!_smallIntDrawers[plane_index]?_extDrawers[plane_index]?_extDrawers[plane_index]&&(row=1):row=2:_smallIntDrawers[plane_index]&&_largeIntDrawers[plane_index]&&(row=_extDrawers[plane_index]?(_extDrawers[plane_index],0):1):row=3:removeBotShelves(plane_index),row}function columnsCombination(){removed.length>0&&removed.forEach(e=>{e==_columns[removed_index]&&removed_id.forEach(i=>{var sizeToChange=2*offset-.022225,posToChange,a,a,a,a,a;if(posToChange=_columns[i].position.x+offset/2,interactivePlanes[i])(a=interactivePlanes[i]).scale.setX(sizeToChange),a.position.setX(posToChange),removeInteractivePlane(i+1);else if(interactivePlanes[i+1]){var a;(a=interactivePlanes[i+1]).scale.setX(sizeToChange),a.position.setX(posToChange),removeInteractivePlane(i)}if(_largeIntDrawers[i]){var a=_largeIntDrawers[i],b=_largeIntDrawers_splitters[i];a.scale.setX(sizeToChange),a.position.setX(posToChange),b.scale.setX(sizeToChange),b.position.setX(a.position.x)}_hangers[i]&&((a=_hangers[i]).scale.setY(sizeToChange),a.position.setX(posToChange));_top_shelves_parent[i]&&(a=_top_shelves_parent[i]).traverse((function(e){e instanceof THREE.Mesh&&(e.scale.setX(sizeToChange),e.position.setX(posToChange))}));_bot_shelf_parent[i]&&(a=_bot_shelf_parent[i]).traverse((function(e){e instanceof THREE.Mesh&&(e.scale.setX(sizeToChange),e.position.setX(posToChange))}));if(_m_splitters[i])(a=_m_splitters[i]).scale.setX(sizeToChange),a.position.setX(posToChange);else if(_m_splitters[i+1]){var a;(a=_m_splitters[i]).scale.setX(sizeToChange),a.position.setX(posToChange),_m_splitters[i+1].visible=!1}if(_extDrawers[i]){var a=_extDrawers[i],b=_extDrawers_splitters[i];a.scale.setX(sizeToChange),a.position.setX(posToChange),b.scale.setX(sizeToChange),b.position.setX(posToChange),removeExternalDrawer(i+1)}else if(_extDrawers[i+1]){var a=_extDrawers[i+1],b=_extDrawers_splitters[i+1];a.scale.setX(sizeToChange),a.position.setX(posToChange),b.scale.setX(sizeToChange),b.position.setX(posToChange),removeExternalDrawer(i)}if(_smallIntDrawers[i])if(_lockers[i])if(_smallIntDrawers[i+1]){var b,a;updateInternalDrawerSmall(i+1),(b=_smallIntDrawers[i+1]).scale.setX(offset),(a=_smallIntDrawers[i]).scale.setX(sizeToChange),a.position.setX(posToChange);var c=_lockers[i],d=_locker_splitters[i];c.scale.setX(offset),d.scale.setX(offset)}else{var b;createInternalDrawerSmall(i+1),updateInternalDrawerSmall(i+1),(b=_smallIntDrawers[i+1]).scale.setX(offset);var c=_lockers[i],d=_locker_splitters[i];c.scale.setX(offset),d.scale.setX(offset)}else if(_lockers[i+1]){var a;(a=_smallIntDrawers[i]).scale.setX(sizeToChange),a.position.setX(posToChange),removeLocker(i+1)}else{var a;(a=_smallIntDrawers[i]).scale.setX(sizeToChange),a.position.setX(posToChange),removeInternalDrawerSmall(i+1)}else if(_smallIntDrawers[i+1]){if(_lockers[i+1]){if(_smallIntDrawers[i+1]){updateInternalDrawerSmall(i+1);var b=_smallIntDrawers[i+1];removeLocker(i+1),b.scale.setX(offset)}}else{var b=_smallIntDrawers[i+1];updateInternalDrawerSmall(i+1),b.scale.setX(offset)}if(_lockers[i]){var b;(b=_smallIntDrawers[i+1]).scale.setX(offset);var a=_lockers[i],c=_locker_splitters[i];a.scale.setX(offset),c.scale.setX(offset)}else{createLocker(i),updateLocker(i);var a=_lockers[i],b=_locker_splitters[i];a.scale.setX(offset),b.scale.setX(offset)}}else if(_lockers[i]){var b;createInternalDrawerSmall(i+1),updateInternalDrawerSmall(i+1),(b=_smallIntDrawers[i+1]).scale.setX(offset);var c=_lockers[i],d=_locker_splitters[i];c.scale.setX(offset),d.scale.setX(offset)}else if(_lockers[i+1]){var b;removeLocker(i+1),createLocker(i),updateLocker(i),createInternalDrawerSmall(i+1),updateInternalDrawerSmall(i+1),(b=_smallIntDrawers[i+1]).scale.setX(offset);var c=_lockers[i],d=_locker_splitters[i];c.scale.setX(offset),d.scale.setX(offset)}})})}function removeAllInterior(){removeLocker(),removeInternalDrawerLarge(),removeInternalDrawerSmall(),removeExternalDrawer(),removeTopShelves(),removeBotShelves(),removeHanger(),removeDoor(),removeSlideDoors(),reset_adjacents_removed_columns()}function createHingedDoor(index){var g=new THREE.BoxGeometry(1,1,1),door=new THREE.Mesh(g,_doorMaterial);door.name="hinged_door_"+index;var _hDoors_group=new THREE.Group;_hDoors_group.add(door),_hDoors_group.name="hinged_door_pivot_"+index,_hDoors_parent[index]=_hDoors_group,_hDoors_parent_group.name="hinged_doors",_hDoors_parent_group.add(_hDoors_parent[index]),scene.add(_hDoors_parent_group)}function updateHingedDoorUpSize(index){if(_hDoors_parent[index]instanceof THREE.Group){var posY=wBack.scale.y/2+wBottom.position.y-wBottom.scale.y/2,scaleY=wTop.position.y-wTop.scale.y/2-wBottom.position.y-wBottom.scale.y/2;if(_extDrawers_splitters.length>0?(posY=wBack.scale.y/2+wBottom.position.y-wBottom.scale.y/2+.1524+.0111125,scaleY=wTop.position.y-wTop.scale.y/2-wBottom.position.y-wBottom.scale.y/2-.3048-.022225):(posY=wBack.scale.y/2+wBottom.position.y-wBottom.scale.y/2,scaleY=wTop.position.y-wTop.scale.y/2-wBottom.position.y-wBottom.scale.y/2),_hDoors_parent_group.position.set(offset+wLeft.position.x,_hDoors_parent_group.position.y,_hDoors_parent_group.position.z),index%2==0)for(var j=0;j<_hDoors_parent[index].children.length;j++)_hDoors_parent[index].children[j]instanceof THREE.Mesh&&(_hDoors_parent[index].children[j].scale.setY(scaleY),_hDoors_parent[index].children[j].position.setY(posY));else for(var j=0;j<_hDoors_parent[index].children.length;j++)_hDoors_parent[index].children[j]instanceof THREE.Mesh&&(_hDoors_parent[index].children[j].scale.setY(scaleY,.022225),_hDoors_parent[index].children[j].position.setY(posY))}}function updateHingedDoor(index){var posY=wBack.scale.y/2+wBottom.position.y-wBottom.scale.y/2,scaleY=wTop.position.y-wTop.scale.y/2-wBottom.position.y-wBottom.scale.y/2;if(_hDoors_parent[index]instanceof THREE.Group)if(_hDoors_parent_group.position.set(offset+wLeft.position.x,_hDoors_parent_group.position.y,_hDoors_parent_group.position.z),index%2==0){for(var j=0;j<_hDoors_parent[index].children.length;j++)_hDoors_parent[index].children[j]instanceof THREE.Mesh&&(_hDoors_parent[index].children[j].scale.set(offset-.022225,scaleY,.022225),_hDoors_parent[index].children[j].position.set(_hDoors_parent[index].children[j].scale.x/2,posY,-.0111125));index!=customColumns-1?(_hDoors_parent[index].position.set(_columns[index].position.x-offset+.0111125,_hDoors_parent[index].position.y,_hDoors_parent[index].position.z+wLeft.scale.z/2),_hDoors_parent[index].rotation.set(0,-80*THREE.Math.DEG2RAD,0)):(_hDoors_parent[index].position.set(_columns[index-1].position.x+.0111125,_hDoors_parent[index].position.y,_hDoors_parent[index].position.z+wLeft.scale.z/2),_hDoors_parent[index].rotation.set(0,-80*THREE.Math.DEG2RAD,0))}else{for(var j=0;j<_hDoors_parent[index].children.length;j++)_hDoors_parent[index].children[j]instanceof THREE.Mesh&&(_hDoors_parent[index].children[j].scale.set(offset-.022225,scaleY,.022225),_hDoors_parent[index].children[j].position.set(_hDoors_parent[index].children[j].scale.x/2,posY,.0111125),_hDoors_parent[index].children[j].material.color.set("#34deeb"));_hDoors_parent[index].position.set(_columns[index-1].position.x+offset-.0111125,_hDoors_parent[index].position.y,_hDoors_parent[index].position.z+wLeft.scale.z/2),_hDoors_parent[index].rotation.set(0,-100*THREE.Math.DEG2RAD,0)}}function updateHingedDoorOnColumnCombined(){(_hDoors_parent[removed_index+1]||_hDoors_parent[removed_index])&&_columns.forEach(e=>{if(0==removed_index)for(var i=0;i<removed_id.length;i++){for(var j=0;j<_hDoors_parent[removed_id[i]].children.length;j++)_hDoors_parent[removed_id[i]].children[j].scale.setX(offset-.0111125),_hDoors_parent[removed_id[i]].children[j].position.setX(_hDoors_parent[removed_id[i]].children[j].scale.x/2);for(var j=0;j<_hDoors_parent[removed_id[i]+1].children.length;j++)_hDoors_parent[removed_id[i]+1].children[j].scale.setX(offset-.0111125),_hDoors_parent[removed_id[i]+1].children[j].position.setX(_hDoors_parent[removed_id[i]+1].children[j].scale.x/2)}else adjacentParts.forEach(a=>{if(e==a){for(var i=0;i<removed_id.length;i++)if(removed_id[i]%2!=0){_hDoors_parent[removed_id[i]].position.setX(_columns[removed_id[i]].position.x+offset-.0111125),_hDoors_parent[removed_id[i]+1].position.setX(_columns[removed_id[i]].position.x-offset+.0111125);for(var j=0;j<_hDoors_parent[removed_id[i]].children.length;j++)_hDoors_parent[removed_id[i]].children[j].scale.setX(offset-.0111125),_hDoors_parent[removed_id[i]].children[j].position.setX(_hDoors_parent[removed_id[i]].children[j].scale.x/2),_hDoors_parent[removed_id[i]].children[j].position.setZ(.0111125);for(var j=0;j<_hDoors_parent[removed_id[i]+1].children.length;j++)_hDoors_parent[removed_id[i]+1].children[j].scale.setX(offset-.0111125),_hDoors_parent[removed_id[i]+1].children[j].position.setX(_hDoors_parent[removed_id[i]+1].children[j].scale.x/2),_hDoors_parent[removed_id[i]+1].children[j].position.setZ(-.0111125)}}else for(var i=0;i<removed_id.length;i++){for(var j=0;j<_hDoors_parent[removed_id[i]].children.length;j++)_hDoors_parent[removed_id[i]].children[j].scale.setX(offset-.0111125),_hDoors_parent[removed_id[i]].children[j].position.setX(_hDoors_parent[removed_id[i]].children[j].scale.x/2);if(_hDoors_parent[removed_id[i]+1])for(var j=0;j<_hDoors_parent[removed_id[i]+1].children.length;j++)_hDoors_parent[removed_id[i]+1].children[j].scale.setX(offset-.0111125),_hDoors_parent[removed_id[i]+1].children[j].position.setX(_hDoors_parent[removed_id[i]+1].children[j].scale.x/2)}})})}function setflipDoor(){for(var i=0;i<_hDoors_parent.length;i++)_hDoors_parent[i]instanceof THREE.Group&&(i%2==0?i==_hDoors_parent.length-1?_hDoors_parent.length%2!=0&&(((_hDoors_parent[i].position.x-_hDoors_parent[i-1].position.x)/2).toFixed(2)>0?_hDoors_parent[i]instanceof THREE.Group&&(_flippableDoor.includes(_hDoors_parent[i])||_flippableDoor.push(_hDoors_parent[i]),_hDoors_parent[i].traverse((function(e){e instanceof THREE.Group&&e.traverse((function(child){THREE.Mesh}))}))):_hDoors_parent[i]instanceof THREE.Group&&(_flippableDoor.includes(_hDoors_parent[i])&&_flippableDoor.splice(_flippableDoor.indexOf(_hDoors_parent[i]),1),_hDoors_parent[i].traverse((function(e){e instanceof THREE.Group&&e.traverse((function(child){THREE.Mesh}))})))):_hDoors_parent[i+2]&&(((_hDoors_parent[i+2].position.x-_hDoors_parent[i].position.x)/2).toFixed(2)<offset.toFixed(2)?_hDoors_parent[i]instanceof THREE.Group&&(_flippableDoor.includes(_hDoors_parent[i])||_flippableDoor.push(_hDoors_parent[i]),_hDoors_parent[i].traverse((function(e){e instanceof THREE.Group&&e.traverse((function(child){child instanceof THREE.Mesh&&_hDoors_parent.length}))}))):_hDoors_parent[i]instanceof THREE.Group&&(_flippableDoor.includes(_hDoors_parent[i])&&_flippableDoor.splice(_flippableDoor.indexOf(_hDoors_parent[i]),1),_hDoors_parent[i].traverse((function(e){e instanceof THREE.Group&&e.traverse((function(child){THREE.Mesh}))})))):_hDoors_parent[i+2]&&(((_hDoors_parent[i+2].position.x-_hDoors_parent[i].position.x)/2).toFixed(2)<offset.toFixed(2)?_hDoors_parent[i+2]instanceof THREE.Group&&(_flippableDoor.includes(_hDoors_parent[i+2])||_flippableDoor.push(_hDoors_parent[i+2]),_hDoors_parent[i+2].traverse((function(e){e instanceof THREE.Group&&e.traverse((function(child){THREE.Mesh}))}))):((_hDoors_parent[i+2].position.x-_hDoors_parent[i].position.x)/2).toFixed(2)<offset.toFixed(2)?_hDoors_parent[i]instanceof THREE.Group&&(_flippableDoor.includes(_hDoors_parent[i])||_flippableDoor.push(_hDoors_parent[i]),_hDoors_parent[i].traverse((function(e){e instanceof THREE.Group&&e.traverse((function(child){THREE.Mesh}))}))):_hDoors_parent[i+2]instanceof THREE.Group&&(_flippableDoor.includes(_hDoors_parent[i+2])&&_flippableDoor.splice(_flippableDoor.indexOf(_hDoors_parent[i+2]),1),_hDoors_parent[i+2].traverse((function(e){e instanceof THREE.Group&&e.traverse((function(child){THREE.Mesh}))}))))),_flippableDoor.includes(_hDoors_parent[i])?flipVerticalSprite[_hDoors_parent.indexOf(_hDoors_parent[i])].visible=!0:flipVerticalSprite[_hDoors_parent.indexOf(_hDoors_parent[i])].visible=!1}function setflipDoor_Select(){for(;fp.firstChild;)fp.removeChild(fp.firstChild);if(_flippableDoor.length>0)for(var i=0;i<=_flippableDoor.length;i++){var op=document.createElement("option");0!=i?(op.setAttribute("value",_hDoors_parent.indexOf(_flippableDoor[i-1])),op.innerHTML="Hinged Door "+(_hDoors_parent.indexOf(_flippableDoor[i-1])+1),fp.appendChild(op)):(op.innerHTML="Select Door To Flip",fp.appendChild(op))}}function _flipDoor(index){_flippableDoor.forEach(f=>{_hDoors_parent.forEach(e=>{e==f&&e instanceof THREE.Group&&e==_hDoors_parent[index]&&(index%2==0?_isDoorRight.includes(_hDoors_parent[index])?(index==_hDoors_parent.length-1?(e.position.setX(_columns[index-1].position.x+.0111125),e.rotation.set(0,-80*THREE.Math.DEG2RAD,0),e.traverse((function(child){child instanceof THREE.Mesh&&child.position.setZ(-.0111125)}))):(e.position.setX(_columns[index].position.x-offset+.0111125),e.rotation.set(0,-80*THREE.Math.DEG2RAD,0),e.traverse((function(child){child instanceof THREE.Mesh&&child.position.setZ(-.0111125)}))),_isDoorRight.splice(_hDoors_parent[index],1)):(index==_hDoors_parent.length-1?(e.position.setX(_columns[index-1].position.x+offset-.0111125),e.rotation.set(0,-100*THREE.Math.DEG2RAD,0),e.traverse((function(child){child instanceof THREE.Mesh&&child.position.setZ(.0111125)}))):(e.position.setX(_columns[index].position.x-.0111125),e.rotation.set(0,-100*THREE.Math.DEG2RAD,0),e.traverse((function(child){child instanceof THREE.Mesh&&child.position.setZ(.0111125)}))),_isDoorRight.push(_hDoors_parent[index])):_isDoorLeft.includes(_hDoors_parent[index])?(e.position.setX(_columns[index-1].position.x+offset-.0111125),e.rotation.set(0,-100*THREE.Math.DEG2RAD,0),e.traverse((function(child){child instanceof THREE.Mesh&&child.position.setZ(.0111125)})),_isDoorLeft.splice(_hDoors_parent[index],1)):(e.position.setX(_columns[index-1].position.x+.0111125),e.rotation.set(0,-80*THREE.Math.DEG2RAD,0),e.traverse((function(child){child instanceof THREE.Mesh&&child.position.setZ(-.0111125)})),_isDoorLeft.push(_hDoors_parent[index])))})})}function createFlipDoorSprite(index){var material=new THREE.SpriteMaterial({map:onNormalFlipSprite,transparent:!0,opacity:.5}),sprite=new THREE.Sprite(material);sprite.name="flipDoor_"+index,sprite.receiveShadow=!1,sprite.castShadow=!1,flipVerticalSprite[index]=sprite,flipVerticalSprite[index].scale.set(.15,.15),flipVertical_group.add(flipVerticalSprite[index]),scene.add(flipVertical_group)}function updateFlipDoorSprite(index){flipVerticalSprite[index].scale.set(.15,.15),flipVerticalSprite[index].position.set(index*offset,wTop.position.y+.2,_hDoors_parent[index].position.z+.025),flipVertical_group.position.set(offset/2+wLeft.position.x,flipVertical_group.position.y,flipVertical_group.position.z),flipVerticalSprite[index].visible=!1}function removeFlipDoorSprite(index){index?(flipVertical_group.forEach(e=>{flipVerticalSprite[index]instanceof THREE.Sprite&&flipVerticalSprite[index]==e&&flipVertical_group instanceof THREE.Group&&flipVertical_group.remove(e)}),flipVertical_group[index]=null):(flipVerticalSprite.forEach(e=>{e instanceof THREE.Sprite&&flipVertical_group instanceof THREE.Group&&flipVertical_group.remove(e)}),flipVerticalSprite=[])}function removeDoor(index){index?_hDoors_parent[index]instanceof THREE.Group&&_hDoors_parent_group.remove(_hDoors_parent[index]):(_hDoors_parent.forEach(e=>{e instanceof THREE.Group&&_hDoors_parent_group.remove(e)}),_hDoors_parent=[]),_flippableDoor=[],_isDoorLeft=[],_isDoorRight=[],$("#addHingedDoor").removeClass("btn-outline-danger"),$("#addHingedDoor").addClass("btn-outline-dark"),$("#addHingedDoor").html("Add Door"),removeFlipDoorSprite(index)}function loftDoorAction(index){if(_loftDoors_parent)if(isLoftOpened)for(var i=0;i<customColumns;i++)_loftDoors_parent[i]instanceof THREE.Group&&(i%2==0?_loftDoors_parent[i].rotation.y>-80*THREE.Math.DEG2RAD&&(_loftDoors_parent[i].rotation.y=-80*THREE.Math.DEG2RAD):_loftDoors_parent[i].rotation.y<-100*THREE.Math.DEG2RAD&&(_loftDoors_parent[i].rotation.y=-100*THREE.Math.DEG2RAD));else for(var i=0;i<customColumns;i++)_loftDoors_parent[i]instanceof THREE.Group&&(i%2==0?_loftDoors_parent[i].rotation.y<0*THREE.Math.DEG2RAD&&(_loftDoors_parent[i].rotation.y=0*THREE.Math.DEG2RAD):_loftDoors_parent[i].rotation.y>-180*THREE.Math.DEG2RAD&&(_loftDoors_parent[i].rotation.y=-180*THREE.Math.DEG2RAD))}function doorAction(index){if(_hDoors_parent)if(isDoorOpened)for(var i=0;i<customColumns;i++)_hDoors_parent[i]instanceof THREE.Group&&(i%2==0?_isDoorRight.includes(_hDoors_parent[i])?_hDoors_parent[i].rotation.y<-100*THREE.Math.DEG2RAD&&(_hDoors_parent[i].rotation.y=-100*THREE.Math.DEG2RAD):_hDoors_parent[i].rotation.y>-80*THREE.Math.DEG2RAD&&(_hDoors_parent[i].rotation.y=-80*THREE.Math.DEG2RAD):_isDoorLeft.includes(_hDoors_parent[i])?_hDoors_parent[i].rotation.y>-80*THREE.Math.DEG2RAD&&(_hDoors_parent[i].rotation.y=-80*THREE.Math.DEG2RAD):_hDoors_parent[i].rotation.y<-100*THREE.Math.DEG2RAD&&(_hDoors_parent[i].rotation.y=-100*THREE.Math.DEG2RAD));else for(var i=0;i<customColumns;i++)_hDoors_parent[i]instanceof THREE.Group&&(i%2==0?_isDoorRight.includes(_hDoors_parent[i])?_hDoors_parent[i].rotation.y>-180*THREE.Math.DEG2RAD&&(_hDoors_parent[i].rotation.y=-180*THREE.Math.DEG2RAD):_hDoors_parent[i].rotation.y<0*THREE.Math.DEG2RAD&&(_hDoors_parent[i].rotation.y=0*THREE.Math.DEG2RAD):_isDoorLeft.includes(_hDoors_parent[i])?_hDoors_parent[i].rotation.y<0*THREE.Math.DEG2RAD&&(_hDoors_parent[i].rotation.y=0*THREE.Math.DEG2RAD):_hDoors_parent[i].rotation.y>-180*THREE.Math.DEG2RAD&&(_hDoors_parent[i].rotation.y=-180*THREE.Math.DEG2RAD))}function paintWardrobe(){scene.traverse((function(child){child instanceof THREE.Mesh&&(child.castShadow=!0,child.receiveShadow=!0)}));var x=.3048*wWidth,y=.3048*wHeight;wood_albedo.repeat.set(x,y),wood_roughness.repeat.set(x,y),wood_normal.repeat.set(x,y)}function createColumnSprite(index){var tex=(new THREE.TextureLoader).load("./assets/icons8-minus-100.png"),material=new THREE.SpriteMaterial({map:tex,transparent:!0,opacity:.5}),sprite=new THREE.Sprite(material);sprite.name="removeColumns"+index,sprite.receiveShadow=!1,sprite.castShadow=!1,deleteSprites[index]=sprite,deleteSprites[index].scale.set(.15,.15),deleteSprites_group.add(deleteSprites[index]),scene.add(deleteSprites_group)}function updateColumnSprite(index){_columns.length>0&&deleteSprites.includes(deleteSprites[index])&&(deleteSprites[index].scale.set(.15,.15),deleteSprites[index].position.set(index*offset,0),deleteSprites_group.position.set(offset+wLeft.position.x,wBottom.position.y+_columns[0].scale.y/2,.3048*wDepth+offset),deleteSprites[index].visible=!!isHingedDoor||index%2==0)}function removeColumnsSprite(index){index?(deleteSprites.forEach(e=>{deleteSprites[index]instanceof THREE.Sprite&&deleteSprites[index]==e&&deleteSprites_group instanceof THREE.Group&&deleteSprites_group.remove(e)}),deleteSprites[index]=null):(deleteSprites.forEach(e=>{e instanceof THREE.Sprite&&deleteSprites_group instanceof THREE.Group&&deleteSprites_group.remove(e)}),deleteSprites=[])}function renderOptionInput(){$("input:radio[name = 'renderOptions']").change((function(){renderOptionsValue=$(this).val()}))}function initMaterial(){wood_albedo=texLoader.load("./textures/Wood_ZebranoVeneer_512_albedo.jpg"),wood_normal=texLoader.load("./textures/Wood_ZebranoVeneer_512_normal.jpg"),wood_roughness=texLoader.load("./textures/Wood_ZebranoVeneer_512_roughness.jpg"),wood_albedo.wrapS=THREE.RepeatWrapping,wood_albedo.wrapT=THREE.RepeatWrapping,wood_normal.wrapS=THREE.RepeatWrapping,wood_normal.wrapT=THREE.RepeatWrapping,wood_roughness.wrapS=THREE.RepeatWrapping,wood_roughness.wrapT=THREE.RepeatWrapping;var hdr=(new THREE.RGBELoader).setPath("./hdri/").load("photo_studio_loft_hall_1k.hdr",(function(texture){var envMap=pmremGenerator.fromEquirectangular(texture).texture;return texture.mapping=THREE.EquirectangularReflectionMapping,texture.dispose(),pmremGenerator.dispose(),envMap}));_wardrobeMaterial=new THREE.MeshStandardMaterial({color:14671839,roughness:.8,name:"wm_wardrobe"}),_railMaterial=new THREE.MeshStandardMaterial({name:"wm_door_rail",color:16645629,roughness:.2,metalness:.8,envMap:hdr}),_splitterMaterial=new THREE.MeshStandardMaterial({color:2293674,roughness:.8,name:"wm_splitter"}),_lockerMaterial=new THREE.MeshStandardMaterial({color:14548957,roughness:.8,name:"wm_locker"}),_doorMaterial=new THREE.MeshStandardMaterial({color:16448034,roughness:.7,name:"wm_door",transparent:!0,opacity:.5}),_hangerMaterial=new THREE.MeshStandardMaterial({color:12566463,name:"wm_hanger",roughness:.5,metalness:.8,envMap:hdr}),_shelfMaterial=new THREE.MeshStandardMaterial({color:16427758,roughness:.8,name:"wm_shelf"}),_columnsMaterial=new THREE.MeshStandardMaterial({color:16733661,roughness:.8,name:"wm_column"}),_extDrawerMaterial=new THREE.MeshStandardMaterial({color:16744272,roughness:.8,name:"wm_extDrawer"}),_intSmallMaterial=new THREE.MeshStandardMaterial({color:11382778,roughness:.8,name:"wm_intSmallDrawer"}),_intLargeMaterial=new THREE.MeshStandardMaterial({color:11173712,roughness:.8,name:"wm_intLargeDrawer"}),_mirrorMaterials=[new THREE.MeshStandardMaterial({color:14671839,roughness:.7,name:"wm_door_0",transparent:!0,opacity:1}),new THREE.MeshStandardMaterial({color:14671839,roughness:.7,name:"wm_door_1",transparent:!0,opacity:1}),new THREE.MeshStandardMaterial({color:14671839,roughness:.7,name:"wm_door_2",transparent:!0,opacity:1}),new THREE.MeshStandardMaterial({color:14671839,roughness:.7,name:"wm_door_3",transparent:!0,opacity:1}),new THREE.MeshStandardMaterial({color:14671839,roughness:.7,name:"wm_door_4",transparent:!0,opacity:1}),new THREE.MeshStandardMaterial({name:"wm_door_mirror",roughness:0,metalness:.5,envMap:hdr})],_flipMirrorMaterials=[new THREE.MeshStandardMaterial({color:16580861,roughness:.7,name:"wm_door_0",transparent:!0,opacity:1}),new THREE.MeshStandardMaterial({color:16711935,roughness:.7,name:"wm_door_1",transparent:!0,opacity:1}),new THREE.MeshStandardMaterial({color:16448034,roughness:.7,name:"wm_door_2",transparent:!0,opacity:1}),new THREE.MeshStandardMaterial({color:14505437,roughness:.7,name:"wm_door_3",transparent:!0,opacity:1}),new THREE.MeshStandardMaterial({color:11197934,roughness:.7,name:"wm_door_4",transparent:!0,opacity:1}),new THREE.MeshStandardMaterial({name:"wm_door_mirror",roughness:0,metalness:.5,envMap:hdr})]}function renderOption(){var defaultColor="#dfdfdf",splitterColor="#d0d0d0",debug_extDrawerColor="#ff7f50",debug_intSmallColor="#adaffa",debug_intLargeColor="#aa7f50",debug_splitterColor="#22ffaa",debug_topShelfColor="#faaaee",debug_botShelfColor="#faaaee",debug_columns_color="#ff55dd",debug_locker_color="#ddffdd",debug_door_color="#fafa22",wireframeColor="#000000";0==renderOptionsValue?(scene.traverse((function(child){child instanceof THREE.Mesh&&(child.castShadow=!0,child.receiveShadow=!0,child.material.wireframe=!1)})),_hDoors_parent.forEach(e=>{e instanceof THREE.Group&&e.traverse((function(child){THREE.Mesh}))}),_wardrobeMaterial.color.set("#dfdfdf"),_extDrawerMaterial.color.set("#dfdfdf"),_splitterMaterial.color.set("#dfdfdf"),_doorMaterial.color.set("#dfdfdf"),_intLargeMaterial.color.set("#dfdfdf"),_intSmallMaterial.color.set("#dfdfdf"),_lockerMaterial.color.set("#dfdfdf"),_columnsMaterial.color.set("#dfdfdf"),_shelfMaterial.color.set("#dfdfdf")):1==renderOptionsValue?(scene.traverse((function(child){child instanceof THREE.Mesh&&(child.castShadow=!1,child.receiveShadow=!1,child.material.wireframe=!1)})),_wardrobeMaterial.color.set("#dfdfdf"),_extDrawerMaterial.color.set("#ff7f50"),_splitterMaterial.color.set("#22ffaa"),_intLargeMaterial.color.set("#aa7f50"),_intSmallMaterial.color.set("#adaffa"),_lockerMaterial.color.set("#ddffdd"),_columnsMaterial.color.set("#ff55dd"),_shelfMaterial.color.set("#faaaee"),ssaoPass.output=THREE.SSAOPass.OUTPUT.Beauty):2==renderOptionsValue&&scene.traverse((function(child){child instanceof THREE.Mesh&&child.visible&&(child.castShadow=!1,child.receiveShadow=!1,child.visible=!0,child.material.wireframe=!0,child.material.wireframeLinejoin="round",child.material.wireframeLinecap="square")}))}function removeSingleInterior(index){_largeIntDrawers[index],THREE.Mesh}function createShadowCatcher(){var geometry=new THREE.PlaneGeometry(100,5),material=new THREE.ShadowMaterial;material.opacity=.05;var mesh=new THREE.Mesh(geometry,material);mesh.receiveShadow=!0,mesh.rotation.x=-90*THREE.Math.DEG2RAD,scene.add(mesh)}function updateColumnsDoor(){isCreated&&(removeDoor(),removeSlideDoors(),removeFlipDoorSprite(),removeColumns(),removeColumnsSprite(),removeHorizontalSplitter(),removeInteractivePlane(),isLoft&&(removeLoftDoors(),removeLoftColumns()),updateColumns(),updateColumnSprite(),deleteSprites_group.visible=!0,flipVertical_group.visible=!0,isCreated=!1)}function createColumns_Doors(bool){updateColumns(),deleteSprites_group.visible=!0,flipVertical_group.visible=!0,updateInteractivePlane(),interactivePlane_group.visible=!1}function createDoorRailMesh(index){var g=new THREE.BoxGeometry(1,1,1),_rBottom=new THREE.Mesh(g,_railMaterial),_rLeft=new THREE.Mesh(g,_railMaterial),_rRight=new THREE.Mesh(g,_railMaterial),_rMiddle=new THREE.Mesh(g,_railMaterial),_rail=new THREE.Group;return _rBottom.name="_rBottom",_rLeft.name="_rLeft",_rRight.name="_rRight",_rMiddle.name="_rMiddle",_rBottom.scale.set(.3048*1.35/12,.00127,1),_rLeft.scale.set(.009525/12,.2667/24-_rBottom.scale.y,1),_rRight.scale.set(.009525/12,.2667/24-_rBottom.scale.y,1),_rMiddle.scale.set(.009525/12,.2667/24-_rBottom.scale.y,1),_rMiddle.position.setX(_rBottom.position.x/2),_rLeft.position.setX(_rBottom.scale.x/2-_rLeft.scale.x/2),_rRight.position.setX(-_rBottom.scale.x/2+_rRight.scale.x/2),_rLeft.position.setY(_rBottom.position.y+_rMiddle.scale.y/2+_rBottom.scale.y/2),_rRight.position.setY(_rBottom.position.y+_rMiddle.scale.y/2+_rBottom.scale.y/2),_rMiddle.position.setY(_rBottom.position.y+_rMiddle.scale.y/2+_rBottom.scale.y/2),_rail.add(_rBottom),_rail.add(_rLeft),_rail.add(_rRight),_rail.add(_rMiddle),_rail.name="_rail_"+index,_rail.position.setY(-_rBottom.scale.y/2),_rail}function createDoorRail(index){for(var _doorRails_group=new THREE.Group,i=0;i<4;i++)_doorRails_parent[i]=createDoorRailMesh(i),_doorRails_group.add(_doorRails_parent[i]);_doorRails_group.name="slide_rail_"+index,_doorRails_parent_group.push(_doorRails_group),_doorRailParent.name="slide_rails",_doorRailParent.add(_doorRails_parent_group[index]),scene.add(_doorRailParent),_doorRailParent.position.set(offset+wLeft.position.x,_doorRailParent.position.y,_doorRailParent.position.z)}function updateDoorRailUp(){var posZ=wBottom.position.z+wBottom.scale.z/2+.017145,scaleZ=wTopLayer.position.y-wTopLayer.scale.y/2-wBottomLayer.position.y+wBottomLayer.scale.y/2-.0111125,posY=wBottomLayer.scale.y/2+wBottomLayer.position.y+635e-6,posY_LR=wBack.scale.y/2-wBottom.scale.y/2+wBottom.position.y;if(_extDrawers.length>0?(scaleZ=wTopLayer.position.y-wTopLayer.scale.y/2-wBottomLayer.position.y+wBottomLayer.scale.y/2-.0111125-.3048-.022225-.0111125,posY_LR=wBack.scale.y/2-wBottom.scale.y/2+wBottom.position.y+.1524+.022225-.00555625,posY=wBottomLayer.scale.y/2+wBottomLayer.position.y+635e-6+.3048+.0111125+.0111125):(posY=wBottomLayer.scale.y/2+wBottomLayer.position.y+635e-6,scaleZ=wTopLayer.position.y-wTopLayer.scale.y/2-wBottomLayer.position.y+wBottomLayer.scale.y/2-.0111125,posY_LR=wBack.scale.y/2-wBottom.scale.y/2+wBottom.position.y),_doorRailParent instanceof THREE.Group)for(var i=0;i<_doorRailParent.children.length;i++)if(_doorRails_parent_group[i]instanceof THREE.Group){0==i?_doorRails_parent_group[i].position.set(_columns[1].position.x,_doorRailParent.position.y,_doorRailParent.position.z):1==i?_doorRails_parent_group[i].position.set(_columns[5].position.x,_doorRailParent.position.y,_doorRailParent.position.z):_doorRails_parent_group[i].position.set(_columns[9].position.x,_doorRailParent.position.y,_doorRailParent.position.z);for(var j=0;j<_doorRails_parent_group[i].children.length;j++)if(_doorRails_parent_group[i].children[j]instanceof THREE.Group){var rail=_doorRails_parent_group[i].children[j];0==j?rail.position.set(0,wTopLayer.position.y-wTopLayer.scale.y/2-635e-6,posZ):j==_doorRails_parent_group[i].children.length-1?(rail.scale.setZ(_columns[0].position.x-_columns[2].position.x-2*offset+.022225),rail.position.set(0,posY,posZ)):(rail.scale.setZ(scaleZ),rail.position.setY(posY_LR))}}}function updateDoorRail(){var posZ=wBottom.position.z+wBottom.scale.z/2+.017145;if(_doorRailParent instanceof THREE.Group)for(var i=0;i<_doorRailParent.children.length;i++)if(_doorRails_parent_group[i]instanceof THREE.Group){0==i?_doorRails_parent_group[i].position.set(_columns[1].position.x,_doorRailParent.position.y,_doorRailParent.position.z):1==i?_doorRails_parent_group[i].position.set(_columns[5].position.x,_doorRailParent.position.y,_doorRailParent.position.z):_doorRails_parent_group[i].position.set(_columns[9].position.x,_doorRailParent.position.y,_doorRailParent.position.z);for(var j=0;j<_doorRails_parent_group[i].children.length;j++)if(_doorRails_parent_group[i].children[j]instanceof THREE.Group){var rail=_doorRails_parent_group[i].children[j];0==j?(rail.name="rail_top",rail.scale.setZ(_columns[0].position.x-_columns[2].position.x-2*offset+.022225),rail.position.set(0,wTopLayer.position.y-wTopLayer.scale.y/2-635e-6,posZ),rail.rotation.x=180*THREE.Math.DEG2RAD,rail.rotation.y=90*THREE.Math.DEG2RAD):j==_doorRails_parent_group[i].children.length-1?(rail.name="rail_bottom",rail.scale.setZ(_columns[0].position.x-_columns[2].position.x-2*offset+.022225),rail.position.set(0,wBottomLayer.scale.y/2+wBottomLayer.position.y+635e-6,posZ),rail.rotation.y=90*THREE.Math.DEG2RAD):1==j?(rail.name="rail_left",rail.scale.setZ(wTopLayer.position.y-wTopLayer.scale.y/2-wBottomLayer.position.y+wBottomLayer.scale.y/2-.0111125),0!=i?i<2?rail.position.set(_doorRails_parent_group[i].position.x-_columns[5].position.x-2*offset+635e-6,wBack.scale.y/2-wBottom.scale.y/2+wBottom.position.y,posZ):rail.position.set(_doorRails_parent_group[i].position.x-_columns[7].position.x-4*offset+635e-6,wBack.scale.y/2-wBottom.scale.y/2+wBottom.position.y,posZ):rail.position.set(_doorRails_parent_group[i].position.x-3*offset+635e-6,wBack.scale.y/2-wBottom.scale.y/2+wBottom.position.y,posZ),rail.rotation.x=90*THREE.Math.DEG2RAD,rail.rotation.z=-90*THREE.Math.DEG2RAD):(rail.name="rail_right",rail.scale.setZ(wTopLayer.position.y-wTopLayer.scale.y/2-wBottomLayer.position.y+wBottomLayer.scale.y/2-.0111125),0!=i?i<2?rail.position.set(_doorRails_parent_group[i].position.x-_columns[5].position.x+2*offset-635e-6,wBack.scale.y/2-wBottom.scale.y/2+wBottom.position.y,posZ):rail.position.set(_doorRails_parent_group[i].position.x-_columns[7].position.x-635e-6,wBack.scale.y/2-wBottom.scale.y/2+wBottom.position.y,posZ):rail.position.set(_doorRails_parent_group[i].position.x+offset-635e-6,wBack.scale.y/2-wBottom.scale.y/2+wBottom.position.y,posZ),rail.rotation.x=90*THREE.Math.DEG2RAD,rail.rotation.z=90*THREE.Math.DEG2RAD)}}}function createSlideDoors(){for(var i=0;i<customColumns/4;i++)createDoorRail(i);for(var i=0;i<customColumns/2;i++)createSlideDoor(i),updateSlideDoor(i),updateSlideDoorsUp(i);updateDoorRail()}function createSlideDoor(index){var g=new THREE.BoxGeometry(1,1,1),door=new THREE.Mesh(g,_doorMaterial);door.name="slide_door_"+index;var _sDoor_group=new THREE.Group;_sDoor_group.add(door),_sDoor_group.name="slide_door_pivot_"+index,_sDoors_parent[index]=_sDoor_group,_sDoors_parent_group.name="slide_doors",_sDoors_parent_group.add(_sDoors_parent[index]),scene.add(_sDoors_parent_group)}function updateSlideDoorsUp(index){var posY=wBack.scale.y/2+wBottom.position.y-wBottom.scale.y/2,scaleY=wTop.position.y-wBottom.position.y-.00254;if(_extDrawers.length>0?(posY=wBack.scale.y/2+wBottom.position.y-wBottom.scale.y/2+.1524+.022225-.00555625,scaleY=wTop.position.y-wBottom.position.y-.00254-.3048-.022225-.0111125):(posY=wBack.scale.y/2+wBottom.position.y-wBottom.scale.y/2,scaleY=wTop.position.y-wBottom.position.y-.00254),_sDoors_parent[index]instanceof THREE.Group){_sDoors_parent_group.position.set(offset+wLeft.position.x,_sDoors_parent_group.position.y,_sDoors_parent_group.position.z);for(var j=0;j<_sDoors_parent[index].children.length;j++)_sDoors_parent[index].children[j]instanceof THREE.Mesh&&(_sDoors_parent[index].children[j].scale.setY(scaleY),_sDoors_parent[index].children[j].position.setY(posY))}}function updateSlideDoor(index){var posY=wBack.scale.y/2+wBottom.position.y-wBottom.scale.y/2,scaleY=wTop.position.y-wBottom.position.y-.00254;if(_sDoors_parent[index]instanceof THREE.Group){_sDoors_parent_group.position.set(offset+wLeft.position.x,_sDoors_parent_group.position.y,_sDoors_parent_group.position.z);for(var j=0;j<_sDoors_parent[index].children.length;j++)_sDoors_parent[index].children[j]instanceof THREE.Mesh&&(_sDoors_parent[index].children[j].scale.set(2*offset+.1524/12,scaleY,.015875),_sDoors_parent[index].children[j].position.set(_sDoors_parent[index].children[j].scale.x/2,posY,_sDoors_parent[index].position.z),_sDoors_parent[index].children[j].material.color.set("#34deeb"));index%2==0?(0==index&&_sDoors_parent[index].position.set(_columns[0].position.x-offset+.00555625,_sDoors_parent[index].position.y,wBottom.position.z+wBottomLayer.scale.z/2+.0079375+396875e-9),2==index&&_sDoors_parent[index].position.set(_columns[5].position.x-2*offset+.00555625,_sDoors_parent[index].position.y,wBottom.position.z+wBottomLayer.scale.z/2+.0079375+396875e-9),4==index&&_sDoors_parent[index].position.set(_columns[9].position.x-2*offset+.00555625,_sDoors_parent[index].position.y,wBottom.position.z+wBottomLayer.scale.z/2+.0079375+396875e-9)):(1==index&&_sDoors_parent[index].position.set(_columns[0].position.x+offset-.00555625-.1524/12,_sDoors_parent[index].position.y,wBottom.position.z+wBottomLayer.scale.z/2-.0079375-396875e-9),3==index&&_sDoors_parent[index].position.set(_columns[5].position.x+offset/24-.00555625-.3048/12,_sDoors_parent[index].position.y,wBottom.position.z+wBottomLayer.scale.z/2-.0079375-396875e-9),5==index&&_sDoors_parent[index].position.set(_columns[9].position.x+offset/24-.00555625-.3048/12,_sDoors_parent[index].position.y,wBottom.position.z+wBottomLayer.scale.z/2-.0079375-396875e-9))}}function removeSlideDoors(index){_doorRails_parent_group.forEach(e=>{_doorRailParent.remove(e)}),index?_sDoors_parent[index]instanceof THREE.Group&&_sDoors_parent_group.remove(_sDoors_parent[index]):(_sDoors_parent.forEach(e=>{e instanceof THREE.Group&&_sDoors_parent_group.remove(e)}),_sDoors_parent=[])}function slideDoorAction(){if(_columns.length>0&&_sDoors_parent.length>0){for(var originalPos,originalPos2,originalPos4,originalPos1,originalPos3,originalPos5,i=0;i<_columns.length;i++)_columns[i]&&(0==i?(originalPos=_columns[i].position.x-offset+.00555625,originalPos1=_columns[i].position.x+offset-.00555625-.1524/12):5==i?(originalPos2=_columns[i].position.x-2*offset+.00555625,originalPos3=_columns[i].position.x+offset/24-.00555625-.3048/12):9==i&&(originalPos4=_columns[i].position.x-2*offset+.00555625,originalPos5=_columns[i].position.x+offset/24-.00555625-.3048/12));if(isSlideLeft)for(var i=0;i<_sDoors_parent.length;i++)_sDoors_parent[i]instanceof THREE.Group&&(i%2==0?0==i?_sDoors_parent[i].position.setX(-.952375*originalPos):2==i?_sDoors_parent[i].position.setX(originalPos2+(2*offset-.022225)):4==i&&_sDoors_parent[i].position.setX(originalPos4+(2*offset-.022225)):1==i?_sDoors_parent[i].position.setX(originalPos1):3==i?_sDoors_parent[i].position.setX(originalPos3):5==i&&_sDoors_parent[i].position.setX(originalPos5));else for(var i=0;i<_sDoors_parent.length;i++)_sDoors_parent[i]instanceof THREE.Group&&i%2==0&&(0==i?_sDoors_parent[i].position.setX(originalPos):2==i?_sDoors_parent[i].position.setX(originalPos2):4==i&&_sDoors_parent[i].position.setX(originalPos4));if(isSlideRight)for(var i=0;i<_sDoors_parent.length;i++)_sDoors_parent[i]instanceof THREE.Group&&(i%2==0?0==i?_sDoors_parent[i].position.setX(originalPos):2==i?_sDoors_parent[i].position.setX(originalPos2):4==i&&_sDoors_parent[i].position.setX(originalPos4):1==i?_sDoors_parent[i].position.setX(-1.0381*originalPos1):3==i?_sDoors_parent[i].position.setX(originalPos3-(2*offset-.022225)):5==i&&_sDoors_parent[i].position.setX(originalPos5-(2*offset-.022225)));else for(var i=0;i<_sDoors_parent.length;i++)_sDoors_parent[i]instanceof THREE.Group&&i%2!=0&&(1==i?_sDoors_parent[i].position.setX(originalPos1):3==i?_sDoors_parent[i].position.setX(originalPos3):5==i&&_sDoors_parent[i].position.setX(originalPos5))}}function reset(){$("#actionSlideDoorLeft").hide(),$("#actionSlideDoorRight").hide(),$("#actionSlideDoorLeft").empty(),$("#actionSlideDoorRight").empty(),$("#actionSlideDoorLeft").append('<i class="m-lg-1  fa fa-door-open"></i>Open Left '),$("#actionSlideDoorRight").append('<i class="m-lg-1  fa fa-door-open"></i>Open Right '),$("#actionDoor").hide(),$("#actionDoor").empty(),$("#actionDoor").append('<i class="m-lg-1  fa fa-door-open"></i>Open Door '),isDoorOpened=!1,isSlideRight=!1,isSlideLeft=!1,removeAllInterior()}link.style.display="none",document.body.appendChild(link),renderOptionInput();